window.jsgv_zh_cn={move_number_after:"",back:"上一手",white:"白方",result:"结果",comment:"评论",trunk:"实战",fast_back:"快退",w:"白",submit:"执行",cancel:"取消",b:"黑",black:"黑方",komi:"贴目/子",whose_turn:"下一手",jump_to:"跳到第",time:"时间",handicap:"让子",moves:"手数",branch:"变化",refresh:"刷新棋谱内容",prev_comment_or_branch:"上一评论或变化图",forward:"下一手",end:"到棋局结束",black_dead:"黑被提",white_dead:"白被提",fast_forward:"快进",next_comment_or_branch:"下一评论或变化图",play_first:"先行",locale:"zh_cn",show_hide_move_number:"显示/隐藏手数",confirm_resign:"你确定要认输吗？",move_number_before:"",resign:"认输",open_in_new_window:"在新窗口打开",home:"到棋局开始",place:"地点",comment_for:"第MOVE手评论",branch_tag:"<变化>",error_thrown:"操作错误",jump_to_xx:"跳到第XX手",rule:"规则"};if(window.jsgvTranslations==undefined){window.jsgvTranslations=jsgv_zh_cn}window.jsgv_en_us={trunk:"Game move",comment:"Comment",result:"Result",white:"White",back:"Back",move_number_after:"",w:"W",fast_back:"Fast back",komi:"Komi",black:"Black",b:"B",cancel:"Cancel",submit:"OK",jump_to:"Jump to",whose_turn:"Next",branch:"Variation",moves:"Moves",handicap:"Handicap",time:"Time",end:"Forward to end",forward:"Forward",prev_comment_or_branch:"Previous comment or variation",refresh:"Refresh game/board",fast_forward:"Fast forward",white_dead:"W dead",black_dead:"B dead",play_first:"Play first",next_comment_or_branch:"Next comment or variation",confirm_resign:"Are you sure you want to resign?",show_hide_move_number:"Show/hide move number",locale:"en_us",error_thrown:"Error",branch_tag:"<Variation>",comment_for:"Comment for MOVE",place:"Place",home:"Back to beginning",open_in_new_window:"Open in new window",resign:"Resign",move_number_before:"",rule:"Rule",jump_to_xx:"Jump to XX"};if(window.jsgvTranslations==undefined){window.jsgvTranslations=jsgv_en_us}(function(){var W=this,ab,F=W.jQuery,S=W.$,T=W.jQuery=W.$=function(d,b){return new T.fn.init(d,b)},M=/^[^<]*(<(.|\s)+>)[^>]*$|^#([\w-]+)$/,ac=/^.[^:#\[\.,]*$/;T.fn=T.prototype={init:function(h,d){h=h||document;if(h.nodeType){this[0]=h;this.length=1;this.context=h;return this}if(typeof h==="string"){var f=M.exec(h);if(f&&(f[1]||!d)){if(f[1]){h=T.clean([f[1]],d)}else{var b=document.getElementById(f[3]);if(b&&b.id!=f[3]){return T().find(h)}var g=T(b||[]);g.context=document;g.selector=h;return g}}else{return T(d).find(h)}}else{if(T.isFunction(h)){return T(document).ready(h)}}if(h.selector&&h.context){this.selector=h.selector;this.context=h.context}return this.setArray(T.isArray(h)?h:T.makeArray(h))},selector:"",jquery:"1.3.2",size:function(){return this.length},get:function(b){return b===ab?Array.prototype.slice.call(this):this[b]},pushStack:function(f,b,g){var d=T(f);d.prevObject=this;d.context=this.context;if(b==="find"){d.selector=this.selector+(this.selector?" ":"")+g}else{if(b){d.selector=this.selector+"."+b+"("+g+")"}}return d},setArray:function(b){this.length=0;Array.prototype.push.apply(this,b);return this},each:function(b,d){return T.each(this,b,d)},index:function(b){return T.inArray(b&&b.jquery?b[0]:b,this)},attr:function(f,b,d){var g=f;if(typeof f==="string"){if(b===ab){return this[0]&&T[d||"attr"](this[0],f)}else{g={};g[f]=b}}return this.each(function(h){for(f in g){T.attr(d?this.style:this,f,T.prop(this,g[f],d,h,f))}})},css:function(d,b){if((d=="width"||d=="height")&&parseFloat(b)<0){b=ab}return this.attr(d,b,"curCSS")},text:function(b){if(typeof b!=="object"&&b!=null){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(b))}var d="";T.each(b||this,function(){T.each(this.childNodes,function(){if(this.nodeType!=8){d+=this.nodeType!=1?this.nodeValue:T.fn.text([this])}})});return d},wrapAll:function(d){if(this[0]){var b=T(d,this[0].ownerDocument).clone();if(this[0].parentNode){b.insertBefore(this[0])}b.map(function(){var f=this;while(f.firstChild){f=f.firstChild}return f}).append(this)}return this},wrapInner:function(b){return this.each(function(){T(this).contents().wrapAll(b)})},wrap:function(b){return this.each(function(){T(this).wrapAll(b)})},append:function(){return this.domManip(arguments,true,function(b){if(this.nodeType==1){this.appendChild(b)}})},prepend:function(){return this.domManip(arguments,true,function(b){if(this.nodeType==1){this.insertBefore(b,this.firstChild)}})},before:function(){return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this)})},after:function(){return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this.nextSibling)})},end:function(){return this.prevObject||T([])},push:[].push,sort:[].sort,splice:[].splice,find:function(d){if(this.length===1){var b=this.pushStack([],"find",d);b.length=0;T.find(d,this[0],b);return b}else{return this.pushStack(T.unique(T.map(this,function(f){return T.find(d,f)})),"find",d)}},clone:function(d){var g=this.map(function(){if(!T.support.noCloneEvent&&!T.isXMLDoc(this)){var i=this.outerHTML;if(!i){var h=this.ownerDocument.createElement("div");h.appendChild(this.cloneNode(true));i=h.innerHTML}return T.clean([i.replace(/ jQuery\d+="(?:\d+|null)"/g,"").replace(/^\s*/,"")])[0]}else{return this.cloneNode(true)}});if(d===true){var b=this.find("*").andSelf(),f=0;g.find("*").andSelf().each(function(){if(this.nodeName!==b[f].nodeName){return}var k=T.data(b[f],"events");for(var h in k){for(var i in k[h]){T.event.add(this,h,k[h][i],k[h][i].data)}}f++})}return g},filter:function(b){return this.pushStack(T.isFunction(b)&&T.grep(this,function(d,f){return b.call(d,f)})||T.multiFilter(b,T.grep(this,function(d){return d.nodeType===1})),"filter",b)},closest:function(f){var b=T.expr.match.POS.test(f)?T(f):null,d=0;return this.map(function(){var g=this;while(g&&g.ownerDocument){if(b?b.index(g)>-1:T(g).is(f)){T.data(g,"closest",d);return g}g=g.parentNode;d++}})},not:function(d){if(typeof d==="string"){if(ac.test(d)){return this.pushStack(T.multiFilter(d,this,true),"not",d)}else{d=T.multiFilter(d,this)}}var b=d.length&&d[d.length-1]!==ab&&!d.nodeType;return this.filter(function(){return b?T.inArray(this,d)<0:this!=d})},add:function(b){return this.pushStack(T.unique(T.merge(this.get(),typeof b==="string"?T(b):T.makeArray(b))))},is:function(b){return !!b&&T.multiFilter(b,this).length>0},hasClass:function(b){return !!b&&this.is("."+b)},val:function(f){if(f===ab){var m=this[0];if(m){if(T.nodeName(m,"option")){return(m.attributes.value||{}).specified?m.value:m.text}if(T.nodeName(m,"select")){var h=m.selectedIndex,d=[],b=m.options,i=m.type=="select-one";if(h<0){return null}for(var l=i?h:0,g=i?h+1:b.length;l<g;l++){var k=b[l];if(k.selected){f=T(k).val();if(i){return f}d.push(f)}}return d}return(m.value||"").replace(/\r/g,"")}return ab}if(typeof f==="number"){f+=""}return this.each(function(){if(this.nodeType!=1){return}if(T.isArray(f)&&/radio|checkbox/.test(this.type)){this.checked=(T.inArray(this.value,f)>=0||T.inArray(this.name,f)>=0)}else{if(T.nodeName(this,"select")){var n=T.makeArray(f);T("option",this).each(function(){this.selected=(T.inArray(this.value,n)>=0||T.inArray(this.text,n)>=0)});if(!n.length){this.selectedIndex=-1}}else{this.value=f}}})},html:function(b){return b===ab?(this[0]?this[0].innerHTML.replace(/ jQuery\d+="(?:\d+|null)"/g,""):null):this.empty().append(b)},replaceWith:function(b){return this.after(b).remove()},eq:function(b){return this.slice(b,+b+1)},slice:function(){return this.pushStack(Array.prototype.slice.apply(this,arguments),"slice",Array.prototype.slice.call(arguments).join(","))},map:function(b){return this.pushStack(T.map(this,function(d,f){return b.call(d,f,d)}))},andSelf:function(){return this.add(this.prevObject)},domManip:function(g,b,d){if(this[0]){var h=(this[0].ownerDocument||this[0]).createDocumentFragment(),l=T.clean(g,(this[0].ownerDocument||this[0]),h),i=h.firstChild;if(i){for(var k=0,m=this.length;k<m;k++){d.call(f(this[k],i),this.length>1||k>0?h.cloneNode(true):h)}}if(l){T.each(l,E)}}return this;function f(o,n){return b&&T.nodeName(o,"table")&&T.nodeName(n,"tr")?(o.getElementsByTagName("tbody")[0]||o.appendChild(o.ownerDocument.createElement("tbody"))):o}}};T.fn.init.prototype=T.fn;function E(d,b){if(b.src){T.ajax({url:b.src,async:false,dataType:"script"})}else{T.globalEval(b.text||b.textContent||b.innerHTML||"")}if(b.parentNode){b.parentNode.removeChild(b)}}function ad(){return +new Date}T.extend=T.fn.extend=function(){var f=arguments[0]||{},h=1,g=arguments.length,l=false,i;if(typeof f==="boolean"){l=f;f=arguments[1]||{};h=2}if(typeof f!=="object"&&!T.isFunction(f)){f={}}if(g==h){f=this;--h}for(;h<g;h++){if((i=arguments[h])!=null){for(var k in i){var d=f[k],b=i[k];if(f===b){continue}if(l&&b&&typeof b==="object"&&!b.nodeType){f[k]=T.extend(l,d||(b.length!=null?[]:{}),b)}else{if(b!==ab){f[k]=b}}}}}return f};var ag=/z-?index|font-?weight|opacity|zoom|line-?height/i,Q=document.defaultView||{},L=Object.prototype.toString;T.extend({noConflict:function(b){W.$=S;if(b){W.jQuery=F}return T},isFunction:function(b){return L.call(b)==="[object Function]"},isArray:function(b){return L.call(b)==="[object Array]"},isXMLDoc:function(b){return b.nodeType===9&&b.documentElement.nodeName!=="HTML"||!!b.ownerDocument&&T.isXMLDoc(b.ownerDocument)},globalEval:function(b){if(b&&/\S/.test(b)){var d=document.getElementsByTagName("head")[0]||document.documentElement,f=document.createElement("script");f.type="text/javascript";if(T.support.scriptEval){f.appendChild(document.createTextNode(b))}else{f.text=b}d.insertBefore(f,d.firstChild);d.removeChild(f)}},nodeName:function(b,d){return b.nodeName&&b.nodeName.toUpperCase()==d.toUpperCase()},each:function(h,b,i){var k,g=0,f=h.length;if(i){if(f===ab){for(k in h){if(b.apply(h[k],i)===false){break}}}else{for(;g<f;){if(b.apply(h[g++],i)===false){break}}}}else{if(f===ab){for(k in h){if(b.call(h[k],k,h[k])===false){break}}}else{for(var d=h[0];g<f&&b.call(d,g,d)!==false;d=h[++g]){}}}return h},prop:function(d,b,f,g,h){if(T.isFunction(b)){b=b.call(d,g)}return typeof b==="number"&&f=="curCSS"&&!ag.test(h)?b+"px":b},className:{add:function(d,b){T.each((b||"").split(/\s+/),function(g,f){if(d.nodeType==1&&!T.className.has(d.className,f)){d.className+=(d.className?" ":"")+f}})},remove:function(d,b){if(d.nodeType==1){d.className=b!==ab?T.grep(d.className.split(/\s+/),function(f){return !T.className.has(b,f)}).join(" "):""}},has:function(b,d){return b&&T.inArray(d,(b.className||b).toString().split(/\s+/))>-1}},swap:function(d,f,b){var h={};for(var g in f){h[g]=d.style[g];d.style[g]=f[g]}b.call(d);for(var g in f){d.style[g]=h[g]}},css:function(h,k,f,l){if(k=="width"||k=="height"){var b,i={position:"absolute",visibility:"hidden",display:"block"},d=k=="width"?["Left","Right"]:["Top","Bottom"];function g(){b=k=="width"?h.offsetWidth:h.offsetHeight;if(l==="border"){return}T.each(d,function(){if(!l){b-=parseFloat(T.curCSS(h,"padding"+this,true))||0}if(l==="margin"){b+=parseFloat(T.curCSS(h,"margin"+this,true))||0}else{b-=parseFloat(T.curCSS(h,"border"+this+"Width",true))||0}})}if(h.offsetWidth!==0){g()}else{T.swap(h,i,g)}return Math.max(0,Math.round(b))}return T.curCSS(h,k,f)},curCSS:function(h,l,k){var d,m=h.style;if(l=="opacity"&&!T.support.opacity){d=T.attr(m,"opacity");return d==""?"1":d}if(l.match(/float/i)){l=H}if(!k&&m&&m[l]){d=m[l]}else{if(Q.getComputedStyle){if(l.match(/float/i)){l="float"}l=l.replace(/([A-Z])/g,"-$1").toLowerCase();var b=Q.getComputedStyle(h,null);if(b){d=b.getPropertyValue(l)}if(l=="opacity"&&d==""){d="1"}}else{if(h.currentStyle){var g=l.replace(/\-(\w)/g,function(o,n){return n.toUpperCase()});d=h.currentStyle[l]||h.currentStyle[g];if(!/^\d+(px)?$/i.test(d)&&/^\d/.test(d)){var i=m.left,f=h.runtimeStyle.left;h.runtimeStyle.left=h.currentStyle.left;m.left=d||0;d=m.pixelLeft+"px";m.left=i;h.runtimeStyle.left=f}}}}return d},clean:function(k,d,g){d=d||document;if(typeof d.createElement==="undefined"){d=d.ownerDocument||d[0]&&d[0].ownerDocument||document}if(!g&&k.length===1&&typeof k[0]==="string"){var h=/^<(\w+)\s*\/?>$/.exec(k[0]);if(h){return[d.createElement(h[1])]}}var i=[],l=[],b=d.createElement("div");T.each(k,function(p,m){if(typeof m==="number"){m+=""}if(!m){return}if(typeof m==="string"){m=m.replace(/(<(\w+)[^>]*?)\/>/g,function(u,t,v){return v.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i)?u:t+"></"+v+">"});var q=m.replace(/^\s+/,"").substring(0,10).toLowerCase();var o=!q.indexOf("<opt")&&[1,"<select multiple='multiple'>","</select>"]||!q.indexOf("<leg")&&[1,"<fieldset>","</fieldset>"]||q.match(/^<(thead|tbody|tfoot|colg|cap)/)&&[1,"<table>","</table>"]||!q.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!q.indexOf("<td")||!q.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||!q.indexOf("<col")&&[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]||!T.support.htmlSerialize&&[1,"div<div>","</div>"]||[0,"",""];b.innerHTML=o[1]+m+o[2];while(o[0]--){b=b.lastChild}if(!T.support.tbody){var n=/<tbody/i.test(m),r=!q.indexOf("<table")&&!n?b.firstChild&&b.firstChild.childNodes:o[1]=="<table>"&&!n?b.childNodes:[];for(var s=r.length-1;s>=0;--s){if(T.nodeName(r[s],"tbody")&&!r[s].childNodes.length){r[s].parentNode.removeChild(r[s])}}}if(!T.support.leadingWhitespace&&/^\s/.test(m)){b.insertBefore(d.createTextNode(m.match(/^\s*/)[0]),b.firstChild)}m=T.makeArray(b.childNodes)}if(m.nodeType){i.push(m)}else{i=T.merge(i,m)}});if(g){for(var f=0;i[f];f++){if(T.nodeName(i[f],"script")&&(!i[f].type||i[f].type.toLowerCase()==="text/javascript")){l.push(i[f].parentNode?i[f].parentNode.removeChild(i[f]):i[f])}else{if(i[f].nodeType===1){i.splice.apply(i,[f+1,0].concat(T.makeArray(i[f].getElementsByTagName("script"))))}g.appendChild(i[f])}}return l}return i},attr:function(f,i,d){if(!f||f.nodeType==3||f.nodeType==8){return ab}var h=!T.isXMLDoc(f),b=d!==ab;i=h&&T.props[i]||i;if(f.tagName){var k=/href|src|style/.test(i);if(i=="selected"&&f.parentNode){f.parentNode.selectedIndex}if(i in f&&h&&!k){if(b){if(i=="type"&&T.nodeName(f,"input")&&f.parentNode){throw"type property can't be changed"}f[i]=d}if(T.nodeName(f,"form")&&f.getAttributeNode(i)){return f.getAttributeNode(i).nodeValue}if(i=="tabIndex"){var g=f.getAttributeNode("tabIndex");return g&&g.specified?g.value:f.nodeName.match(/(button|input|object|select|textarea)/i)?0:f.nodeName.match(/^(a|area)$/i)&&f.href?0:ab}return f[i]}if(!T.support.style&&h&&i=="style"){return T.attr(f.style,"cssText",d)}if(b){f.setAttribute(i,""+d)}var l=!T.support.hrefNormalized&&h&&k?f.getAttribute(i,2):f.getAttribute(i);return l===null?ab:l}if(!T.support.opacity&&i=="opacity"){if(b){f.zoom=1;f.filter=(f.filter||"").replace(/alpha\([^)]*\)/,"")+(parseInt(d)+""=="NaN"?"":"alpha(opacity="+d*100+")")}return f.filter&&f.filter.indexOf("opacity=")>=0?(parseFloat(f.filter.match(/opacity=([^)]*)/)[1])/100)+"":""}i=i.replace(/-([a-z])/ig,function(n,m){return m.toUpperCase()});if(b){f[i]=d}return f[i]},trim:function(b){return(b||"").replace(/^\s+|\s+$/g,"")},makeArray:function(b){var f=[];if(b!=null){var d=b.length;if(d==null||typeof b==="string"||T.isFunction(b)||b.setInterval){f[0]=b}else{while(d){f[--d]=b[d]}}}return f},inArray:function(d,b){for(var g=0,f=b.length;g<f;g++){if(b[g]===d){return g}}return -1},merge:function(d,h){var g=0,f,b=d.length;if(!T.support.getAll){while((f=h[g++])!=null){if(f.nodeType!=8){d[b++]=f}}}else{while((f=h[g++])!=null){d[b++]=f}}return d},unique:function(b){var i=[],k={};try{for(var h=0,g=b.length;h<g;h++){var d=T.data(b[h]);if(!k[d]){k[d]=true;i.push(b[h])}}}catch(f){i=b}return i},grep:function(h,b,i){var g=[];for(var f=0,d=h.length;f<d;f++){if(!i!=!b(h[f],f)){g.push(h[f])}}return g},map:function(i,b){var h=[];for(var g=0,f=i.length;g<f;g++){var d=b(i[g],g);if(d!=null){h[h.length]=d}}return h.concat.apply([],h)}});var O=navigator.userAgent.toLowerCase();T.browser={version:(O.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(O),opera:/opera/.test(O),msie:/msie/.test(O)&&!/opera/.test(O),mozilla:/mozilla/.test(O)&&!/(compatible|webkit)/.test(O)};T.each({parent:function(b){return b.parentNode},parents:function(b){return T.dir(b,"parentNode")},next:function(b){return T.nth(b,2,"nextSibling")},prev:function(b){return T.nth(b,2,"previousSibling")},nextAll:function(b){return T.dir(b,"nextSibling")},prevAll:function(b){return T.dir(b,"previousSibling")},siblings:function(b){return T.sibling(b.parentNode.firstChild,b)},children:function(b){return T.sibling(b.firstChild)},contents:function(b){return T.nodeName(b,"iframe")?b.contentDocument||b.contentWindow.document:T.makeArray(b.childNodes)}},function(d,b){T.fn[d]=function(g){var f=T.map(this,b);if(g&&typeof g=="string"){f=T.multiFilter(g,f)}return this.pushStack(T.unique(f),d,g)}});T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,b){T.fn[d]=function(l){var h=[],f=T(l);for(var g=0,k=f.length;g<k;g++){var i=(g>0?this.clone(true):this).get();T.fn[b].apply(T(f[g]),i);h=h.concat(i)}return this.pushStack(h,d,l)}});T.each({removeAttr:function(b){T.attr(this,b,"");if(this.nodeType==1){this.removeAttribute(b)}},addClass:function(b){T.className.add(this,b)},removeClass:function(b){T.className.remove(this,b)},toggleClass:function(b,d){if(typeof d!=="boolean"){d=!T.className.has(this,b)}T.className[d?"add":"remove"](this,b)},remove:function(b){if(!b||T.filter(b,[this]).length){T("*",this).add([this]).each(function(){T.event.remove(this);T.removeData(this)});if(this.parentNode){this.parentNode.removeChild(this)}}},empty:function(){T(this).children().remove();while(this.firstChild){this.removeChild(this.firstChild)}}},function(d,b){T.fn[d]=function(){return this.each(b,arguments)}});function Y(d,b){return d[0]&&parseInt(T.curCSS(d[0],b,true),10)||0}var aa="jQuery"+ad(),I=0,R={};T.extend({cache:{},data:function(f,g,d){f=f==W?R:f;var b=f[aa];if(!b){b=f[aa]=++I}if(g&&!T.cache[b]){T.cache[b]={}}if(d!==ab){T.cache[b][g]=d}return g?T.cache[b][g]:b},removeData:function(f,g){f=f==W?R:f;var b=f[aa];if(g){if(T.cache[b]){delete T.cache[b][g];g="";for(g in T.cache[b]){break}if(!g){T.removeData(f)}}}else{try{delete f[aa]}catch(d){if(f.removeAttribute){f.removeAttribute(aa)}}delete T.cache[b]}},queue:function(f,g,b){if(f){g=(g||"fx")+"queue";var d=T.data(f,g);if(!d||T.isArray(b)){d=T.data(f,g,T.makeArray(b))}else{if(b){d.push(b)}}}return d},dequeue:function(b,d){var g=T.queue(b,d),f=g.shift();if(!d||d==="fx"){f=g[0]}if(f!==ab){f.call(b)}}});T.fn.extend({data:function(g,d){var b=g.split(".");b[1]=b[1]?"."+b[1]:"";if(d===ab){var f=this.triggerHandler("getData"+b[1]+"!",[b[0]]);if(f===ab&&this.length){f=T.data(this[0],g)}return f===ab&&b[1]?this.data(b[0]):f}else{return this.trigger("setData"+b[1]+"!",[b[0],d]).each(function(){T.data(this,g,d)})}},removeData:function(b){return this.each(function(){T.removeData(this,b)})},queue:function(d,b){if(typeof d!=="string"){b=d;d="fx"}if(b===ab){return T.queue(this[0],d)}return this.each(function(){var f=T.queue(this,d,b);if(d=="fx"&&f.length==1){f[0].call(this)}})},dequeue:function(b){return this.each(function(){T.dequeue(this,b)})}});(function(){var d=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,l=0,p=Object.prototype.toString;var r=function(v,z,am,al){am=am||[];z=z||document;if(z.nodeType!==1&&z.nodeType!==9){return[]}if(!v||typeof v!=="string"){return am}var u=[],x,ai,B,A,ak,y,w=true;d.lastIndex=0;while((x=d.exec(v))!==null){u.push(x[1]);if(x[2]){y=RegExp.rightContext;break}}if(u.length>1&&k.exec(v)){if(u.length===2&&o.relative[u[0]]){ai=n(u[0]+u[1],z)}else{ai=o.relative[u[0]]?[z]:r(u.shift(),z);while(u.length){v=u.shift();if(o.relative[v]){v+=u.shift()}ai=n(v,ai)}}}else{var aj=al?{expr:u.pop(),set:s(al)}:r.find(u.pop(),u.length===1&&z.parentNode?z.parentNode:z,f(z));ai=r.filter(aj.expr,aj.set);if(u.length>0){B=s(ai)}else{w=false}while(u.length){var C=u.pop(),D=C;if(!o.relative[C]){C=""}else{D=u.pop()}if(D==null){D=z}o.relative[C](B,D,f(z))}}if(!B){B=ai}if(!B){throw"Syntax error, unrecognized expression: "+(C||v)}if(p.call(B)==="[object Array]"){if(!w){am.push.apply(am,B)}else{if(z.nodeType===1){for(var t=0;B[t]!=null;t++){if(B[t]&&(B[t]===true||B[t].nodeType===1&&m(z,B[t]))){am.push(ai[t])}}}else{for(var t=0;B[t]!=null;t++){if(B[t]&&B[t].nodeType===1){am.push(ai[t])}}}}}else{s(B,am)}if(y){r(y,z,am,al);if(q){hasDuplicate=false;am.sort(q);if(hasDuplicate){for(var t=1;t<am.length;t++){if(am[t]===am[t-1]){am.splice(t--,1)}}}}}return am};r.matches=function(u,t){return r(u,null,null,t)};r.find=function(t,A,B){var u,w;if(!t){return[]}for(var x=0,y=o.order.length;x<y;x++){var v=o.order[x],w;if((w=o.match[v].exec(t))){var z=RegExp.leftContext;if(z.substr(z.length-1)!=="\\"){w[1]=(w[1]||"").replace(/\\/g,"");u=o.find[v](w,A,B);if(u!=null){t=t.replace(o.match[v],"");break}}}}if(!u){u=A.getElementsByTagName("*")}return{set:u,expr:t}};r.filter=function(ak,al,D,x){var y=ak,B=[],t=al,v,A,u=al&&al[0]&&f(al[0]);while(ak&&al.length){for(var am in o.filter){if((v=o.match[am].exec(ak))!=null){var z=o.filter[am],C,ai;A=false;if(t==B){B=[]}if(o.preFilter[am]){v=o.preFilter[am](v,t,D,B,x,u);if(!v){A=C=true}else{if(v===true){continue}}}if(v){for(var w=0;(ai=t[w])!=null;w++){if(ai){C=z(ai,v,w,t);var aj=x^!!C;if(D&&C!=null){if(aj){A=true}else{t[w]=false}}else{if(aj){B.push(ai);A=true}}}}}if(C!==ab){if(!D){t=B}ak=ak.replace(o.match[am],"");if(!A){return[]}break}}}if(ak==y){if(A==null){throw"Syntax error, unrecognized expression: "+ak}else{break}}y=ak}return t};var o=r.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(t){return t.getAttribute("href")}},relative:{"+":function(t,A,u){var w=typeof A==="string",B=w&&!/\W/.test(A),v=w&&!B;if(B&&!u){A=A.toUpperCase()}for(var x=0,y=t.length,z;x<y;x++){if((z=t[x])){while((z=z.previousSibling)&&z.nodeType!==1){}t[x]=v||z&&z.nodeName===A?z||false:z===A}}if(v){r.filter(A,t,true)}},">":function(y,v,x){var A=typeof v==="string";if(A&&!/\W/.test(v)){v=x?v:v.toUpperCase();for(var u=0,w=y.length;u<w;u++){var z=y[u];if(z){var t=z.parentNode;y[u]=t.nodeName===v?t:false}}}else{for(var u=0,w=y.length;u<w;u++){var z=y[u];if(z){y[u]=A?z.parentNode:z.parentNode===v}}if(A){r.filter(v,y,true)}}},"":function(t,v,x){var u=l++,w=b;if(!v.match(/\W/)){var y=v=x?v:v.toUpperCase();w=g}w("parentNode",v,u,t,y,x)},"~":function(t,v,x){var u=l++,w=b;if(typeof v==="string"&&!v.match(/\W/)){var y=v=x?v:v.toUpperCase();w=g}w("previousSibling",v,u,t,y,x)}},find:{ID:function(v,u,t){if(typeof u.getElementById!=="undefined"&&!t){var w=u.getElementById(v[1]);return w?[w]:[]}},NAME:function(u,y,x){if(typeof y.getElementsByName!=="undefined"){var v=[],z=y.getElementsByName(u[1]);for(var t=0,w=z.length;t<w;t++){if(z[t].getAttribute("name")===u[1]){v.push(z[t])}}return v.length===0?null:v}},TAG:function(u,t){return t.getElementsByTagName(u[1])}},preFilter:{CLASS:function(t,v,u,w,y,x){t=" "+t[1].replace(/\\/g,"")+" ";if(x){return t}for(var A=0,z;(z=v[A])!=null;A++){if(z){if(y^(z.className&&(" "+z.className+" ").indexOf(t)>=0)){if(!u){w.push(z)}}else{if(u){v[A]=false}}}}return false},ID:function(t){return t[1].replace(/\\/g,"")},TAG:function(u,v){for(var t=0;v[t]===false;t++){}return v[t]&&f(v[t])?u[1]:u[1].toUpperCase()},CHILD:function(u){if(u[1]=="nth"){var t=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(u[2]=="even"&&"2n"||u[2]=="odd"&&"2n+1"||!/\D/.test(u[2])&&"0n+"+u[2]||u[2]);u[2]=(t[1]+(t[2]||1))-0;u[3]=t[3]-0}u[0]=l++;return u},ATTR:function(z,v,u,w,y,x){var t=z[1].replace(/\\/g,"");if(!x&&o.attrMap[t]){z[1]=o.attrMap[t]}if(z[2]==="~="){z[4]=" "+z[4]+" "}return z},PSEUDO:function(y,v,u,w,x){if(y[1]==="not"){if(y[3].match(d).length>1||/^\w/.test(y[3])){y[3]=r(y[3],null,null,v)}else{var t=r.filter(y[3],v,u,true^x);if(!u){w.push.apply(w,t)}return false}}else{if(o.match.POS.test(y[0])||o.match.CHILD.test(y[0])){return true}}return y},POS:function(t){t.unshift(true);return t}},filters:{enabled:function(t){return t.disabled===false&&t.type!=="hidden"},disabled:function(t){return t.disabled===true},checked:function(t){return t.checked===true},selected:function(t){t.parentNode.selectedIndex;return t.selected===true},parent:function(t){return !!t.firstChild},empty:function(t){return !t.firstChild},has:function(t,u,v){return !!r(v[3],t).length},header:function(t){return/h\d/i.test(t.nodeName)},text:function(t){return"text"===t.type},radio:function(t){return"radio"===t.type},checkbox:function(t){return"checkbox"===t.type},file:function(t){return"file"===t.type},password:function(t){return"password"===t.type},submit:function(t){return"submit"===t.type},image:function(t){return"image"===t.type},reset:function(t){return"reset"===t.type},button:function(t){return"button"===t.type||t.nodeName.toUpperCase()==="BUTTON"},input:function(t){return/input|select|textarea|button/i.test(t.nodeName)}},setFilters:{first:function(t,u){return u===0},last:function(u,v,w,t){return v===t.length-1},even:function(t,u){return u%2===0},odd:function(t,u){return u%2===1},lt:function(t,u,v){return u<v[3]-0},gt:function(t,u,v){return u>v[3]-0},nth:function(t,u,v){return v[3]-0==u},eq:function(t,u,v){return v[3]-0==u}},filter:{PSEUDO:function(y,u,t,x){var v=u[1],A=o.filters[v];if(A){return A(y,t,u,x)}else{if(v==="contains"){return(y.textContent||y.innerText||"").indexOf(u[3])>=0}else{if(v==="not"){var z=u[3];for(var t=0,w=z.length;t<w;t++){if(z[t]===y){return false}}return true}}}},CHILD:function(A,x){var u=x[1],z=A;switch(u){case"only":case"first":while(z=z.previousSibling){if(z.nodeType===1){return false}}if(u=="first"){return true}z=A;case"last":while(z=z.nextSibling){if(z.nodeType===1){return false}}return true;case"nth":var y=x[2],B=x[3];if(y==1&&B==0){return true}var v=x[0],C=A.parentNode;if(C&&(C.sizcache!==v||!A.nodeIndex)){var w=0;for(z=C.firstChild;z;z=z.nextSibling){if(z.nodeType===1){z.nodeIndex=++w}}C.sizcache=v}var t=A.nodeIndex-B;if(y==0){return t==0}else{return(t%y==0&&t/y>=0)}}},ID:function(t,u){return t.nodeType===1&&t.getAttribute("id")===u},TAG:function(t,u){return(u==="*"&&t.nodeType===1)||t.nodeName===u},CLASS:function(t,u){return(" "+(t.className||t.getAttribute("class"))+" ").indexOf(u)>-1},ATTR:function(y,t){var u=t[1],w=o.attrHandle[u]?o.attrHandle[u](y):y[u]!=null?y[u]:y.getAttribute(u),x=w+"",z=t[2],v=t[4];return w==null?z==="!=":z==="="?x===v:z==="*="?x.indexOf(v)>=0:z==="~="?(" "+x+" ").indexOf(v)>=0:!v?x&&w!==false:z==="!="?x!=v:z==="^="?x.indexOf(v)===0:z==="$="?x.substr(x.length-v.length)===v:z==="|="?x===v||x.substr(0,v.length+1)===v+"-":false},POS:function(y,v,u,x){var w=v[2],t=o.setFilters[w];if(t){return t(y,u,v,x)}}}};var k=o.match.POS;for(var h in o.match){o.match[h]=RegExp(o.match[h].source+/(?![^\[]*\])(?![^\(]*\))/.source)}var s=function(t,u){t=Array.prototype.slice.call(t);if(u){u.push.apply(u,t);return u}return t};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(i){s=function(x,t){var v=t||[];if(p.call(x)==="[object Array]"){Array.prototype.push.apply(v,x)}else{if(typeof x.length==="number"){for(var u=0,w=x.length;u<w;u++){v.push(x[u])}}else{for(var u=0;x[u];u++){v.push(x[u])}}}return v}}var q;if(document.documentElement.compareDocumentPosition){q=function(u,v){var t=u.compareDocumentPosition(v)&4?-1:u===v?0:1;if(t===0){hasDuplicate=true}return t}}else{if("sourceIndex" in document.documentElement){q=function(u,v){var t=u.sourceIndex-v.sourceIndex;if(t===0){hasDuplicate=true}return t}}else{if(document.createRange){q=function(t,v){var u=t.ownerDocument.createRange(),w=v.ownerDocument.createRange();u.selectNode(t);u.collapse(true);w.selectNode(v);w.collapse(true);var x=u.compareBoundaryPoints(Range.START_TO_END,w);if(x===0){hasDuplicate=true}return x}}}}(function(){var u=document.createElement("form"),t="script"+(new Date).getTime();u.innerHTML="<input name='"+t+"'/>";var v=document.documentElement;v.insertBefore(u,v.firstChild);if(!!document.getElementById(t)){o.find.ID=function(z,y,x){if(typeof y.getElementById!=="undefined"&&!x){var w=y.getElementById(z[1]);return w?w.id===z[1]||typeof w.getAttributeNode!=="undefined"&&w.getAttributeNode("id").nodeValue===z[1]?[w]:ab:[]}};o.filter.ID=function(x,w){var y=typeof x.getAttributeNode!=="undefined"&&x.getAttributeNode("id");return x.nodeType===1&&y&&y.nodeValue===w}}v.removeChild(u)})();(function(){var t=document.createElement("div");t.appendChild(document.createComment(""));if(t.getElementsByTagName("*").length>0){o.find.TAG=function(w,x){var y=x.getElementsByTagName(w[1]);if(w[1]==="*"){var u=[];for(var v=0;y[v];v++){if(y[v].nodeType===1){u.push(y[v])}}y=u}return y}}t.innerHTML="<a href='#'></a>";if(t.firstChild&&typeof t.firstChild.getAttribute!=="undefined"&&t.firstChild.getAttribute("href")!=="#"){o.attrHandle.href=function(u){return u.getAttribute("href",2)}}})();if(document.querySelectorAll){(function(){var u=r,t=document.createElement("div");t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0){return}r=function(y,z,w,v){z=z||document;if(!v&&z.nodeType===9&&!f(z)){try{return s(z.querySelectorAll(y),w)}catch(x){}}return u(y,z,w,v)};r.find=u.find;r.filter=u.filter;r.selectors=u.selectors;r.matches=u.matches})()}if(document.getElementsByClassName&&document.documentElement.getElementsByClassName){(function(){var t=document.createElement("div");t.innerHTML="<div class='test e'></div><div class='test'></div>";if(t.getElementsByClassName("e").length===0){return}t.lastChild.className="e";if(t.getElementsByClassName("e").length===1){return}o.order.splice(1,0,"CLASS");o.find.CLASS=function(w,v,u){if(typeof v.getElementsByClassName!=="undefined"&&!u){return v.getElementsByClassName(w[1])}}})()}function g(z,u,v,B,t,C){var D=z=="previousSibling"&&!C;for(var x=0,y=B.length;x<y;x++){var A=B[x];if(A){if(D&&A.nodeType===1){A.sizcache=v;A.sizset=x}A=A[z];var w=false;while(A){if(A.sizcache===v){w=B[A.sizset];break}if(A.nodeType===1&&!C){A.sizcache=v;A.sizset=x}if(A.nodeName===u){w=A;break}A=A[z]}B[x]=w}}}function b(z,u,v,B,t,C){var D=z=="previousSibling"&&!C;for(var x=0,y=B.length;x<y;x++){var A=B[x];if(A){if(D&&A.nodeType===1){A.sizcache=v;A.sizset=x}A=A[z];var w=false;while(A){if(A.sizcache===v){w=B[A.sizset];break}if(A.nodeType===1){if(!C){A.sizcache=v;A.sizset=x}if(typeof u!=="string"){if(A===u){w=true;break}}else{if(r.filter(u,[A]).length>0){w=A;break}}}A=A[z]}B[x]=w}}}var m=document.compareDocumentPosition?function(t,u){return t.compareDocumentPosition(u)&16}:function(t,u){return t!==u&&(t.contains?t.contains(u):true)};var f=function(t){return t.nodeType===9&&t.documentElement.nodeName!=="HTML"||!!t.ownerDocument&&f(t.ownerDocument)};var n=function(w,y){var t=[],A="",z,u=y.nodeType?[y]:y;while((z=o.match.PSEUDO.exec(w))){A+=z[0];w=w.replace(o.match.PSEUDO,"")}w=o.relative[w]?w+"*":w;for(var x=0,v=u.length;x<v;x++){r(w,u[x],t)}return r.filter(A,t)};T.find=r;T.filter=r.filter;T.expr=r.selectors;T.expr[":"]=T.expr.filters;r.selectors.filters.hidden=function(t){return t.offsetWidth===0||t.offsetHeight===0};r.selectors.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0};r.selectors.filters.animated=function(t){return T.grep(T.timers,function(u){return t===u.elem}).length};T.multiFilter=function(t,v,u){if(u){t=":not("+t+")"}return r.matches(t,v)};T.dir=function(u,v){var w=[],t=u[v];while(t&&t!=document){if(t.nodeType==1){w.push(t)}t=t[v]}return w};T.nth=function(x,w,u,t){w=w||1;var v=0;for(;x;x=x[u]){if(x.nodeType==1&&++v==w){break}}return x};T.sibling=function(t,u){var v=[];for(;t;t=t.nextSibling){if(t.nodeType==1&&t!=u){v.push(t)}}return v};return;W.Sizzle=r})();T.event={add:function(f,i,g,b){if(f.nodeType==3||f.nodeType==8){return}if(f.setInterval&&f!=W){f=W}if(!g.guid){g.guid=this.guid++}if(b!==ab){var h=g;g=this.proxy(h);g.data=b}var k=T.data(f,"events")||T.data(f,"events",{}),d=T.data(f,"handle")||T.data(f,"handle",function(){return typeof T!=="undefined"&&!T.event.triggered?T.event.handle.apply(arguments.callee.elem,arguments):ab});d.elem=f;T.each(i.split(/\s+/),function(o,n){var m=n.split(".");n=m.shift();g.type=m.slice().sort().join(".");var l=k[n];if(T.event.specialAll[n]){T.event.specialAll[n].setup.call(f,b,m)}if(!l){l=k[n]={};if(!T.event.special[n]||T.event.special[n].setup.call(f,b,m)===false){if(f.addEventListener){f.addEventListener(n,d,false)}else{if(f.attachEvent){f.attachEvent("on"+n,d)}}}}l[g.guid]=g;T.event.global[n]=true});f=null},guid:1,global:{},remove:function(d,h,f){if(d.nodeType==3||d.nodeType==8){return}var i=T.data(d,"events"),k,l;if(i){if(h===ab||(typeof h==="string"&&h.charAt(0)==".")){for(var g in i){this.remove(d,g+(h||""))}}else{if(h.type){f=h.handler;h=h.type}T.each(h.split(/\s+/),function(q,o){var m=o.split(".");o=m.shift();var p=RegExp("(^|\\.)"+m.slice().sort().join(".*\\.")+"(\\.|$)");if(i[o]){if(f){delete i[o][f.guid]}else{for(var n in i[o]){if(p.test(i[o][n].type)){delete i[o][n]}}}if(T.event.specialAll[o]){T.event.specialAll[o].teardown.call(d,m)}for(k in i[o]){break}if(!k){if(!T.event.special[o]||T.event.special[o].teardown.call(d,m)===false){if(d.removeEventListener){d.removeEventListener(o,T.data(d,"handle"),false)}else{if(d.detachEvent){d.detachEvent("on"+o,T.data(d,"handle"))}}}k=null;delete i[o]}}})}for(k in i){break}if(!k){var b=T.data(d,"handle");if(b){b.elem=null}T.removeData(d,"events");T.removeData(d,"handle")}}},trigger:function(g,d,h,l){var i=g.type||g;if(!l){g=typeof g==="object"?g[aa]?g:T.extend(T.Event(i),g):T.Event(i);if(i.indexOf("!")>=0){g.type=i=i.slice(0,-1);g.exclusive=true}if(!h){g.stopPropagation();if(this.global[i]){T.each(T.cache,function(){if(this.events&&this.events[i]){T.event.trigger(g,d,this.handle.elem)}})}}if(!h||h.nodeType==3||h.nodeType==8){return ab}g.result=ab;g.target=h;d=T.makeArray(d);d.unshift(g)}g.currentTarget=h;var f=T.data(h,"handle");if(f){f.apply(h,d)}if((!h[i]||(T.nodeName(h,"a")&&i=="click"))&&h["on"+i]&&h["on"+i].apply(h,d)===false){g.result=false}if(!l&&h[i]&&!g.isDefaultPrevented()&&!(T.nodeName(h,"a")&&i=="click")){this.triggered=true;try{h[i]()}catch(b){}}this.triggered=false;if(!g.isPropagationStopped()){var k=h.parentNode||h.ownerDocument;if(k){T.event.trigger(g,d,k,true)}}},handle:function(d){var f,l;d=arguments[0]=T.event.fix(d||W.event);d.currentTarget=this;var b=d.type.split(".");d.type=b.shift();f=!b.length&&!d.exclusive;var g=RegExp("(^|\\.)"+b.slice().sort().join(".*\\.")+"(\\.|$)");l=(T.data(this,"events")||{})[d.type];for(var i in l){var h=l[i];if(f||g.test(h.type)){d.handler=h;d.data=h.data;var k=h.apply(this,arguments);if(k!==ab){d.result=k;if(k===false){d.preventDefault();d.stopPropagation()}}if(d.isImmediatePropagationStopped()){break}}}},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(f){if(f[aa]){return f}var h=f;f=T.Event(h);for(var g=this.props.length,b;g;){b=this.props[--g];f[b]=h[b]}if(!f.target){f.target=f.srcElement||document}if(f.target.nodeType==3){f.target=f.target.parentNode}if(!f.relatedTarget&&f.fromElement){f.relatedTarget=f.fromElement==f.target?f.toElement:f.fromElement}if(f.pageX==null&&f.clientX!=null){var d=document.documentElement,i=document.body;f.pageX=f.clientX+(d&&d.scrollLeft||i&&i.scrollLeft||0)-(d.clientLeft||0);f.pageY=f.clientY+(d&&d.scrollTop||i&&i.scrollTop||0)-(d.clientTop||0)}if(!f.which&&((f.charCode||f.charCode===0)?f.charCode:f.keyCode)){f.which=f.charCode||f.keyCode}if(!f.metaKey&&f.ctrlKey){f.metaKey=f.ctrlKey}if(!f.which&&f.button){f.which=(f.button&1?1:(f.button&2?3:(f.button&4?2:0)))}return f},proxy:function(b,d){d=d||function(){return b.apply(this,arguments)};d.guid=b.guid=b.guid||d.guid||this.guid++;return d},special:{ready:{setup:P,teardown:function(){}}},specialAll:{live:{setup:function(d,b){T.event.add(this,b[0],af)},teardown:function(b){if(b.length){var f=0,d=RegExp("(^|\\.)"+b[0]+"(\\.|$)");T.each((T.data(this,"events").live||{}),function(){if(d.test(this.type)){f++}});if(f<1){T.event.remove(this,b[0],af)}}}}}};T.Event=function(b){if(!this.preventDefault){return new T.Event(b)}if(b&&b.type){this.originalEvent=b;this.type=b.type}else{this.type=b}this.timeStamp=ad();this[aa]=true};function X(){return false}function J(){return true}T.Event.prototype={preventDefault:function(){this.isDefaultPrevented=J;var b=this.originalEvent;if(!b){return}if(b.preventDefault){b.preventDefault()}b.returnValue=false},stopPropagation:function(){this.isPropagationStopped=J;var b=this.originalEvent;if(!b){return}if(b.stopPropagation){b.stopPropagation()}b.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=J;this.stopPropagation()},isDefaultPrevented:X,isPropagationStopped:X,isImmediatePropagationStopped:X};var ah=function(d){var f=d.relatedTarget;while(f&&f!=this){try{f=f.parentNode}catch(b){f=this}}if(f!=this){d.type=d.data;T.event.handle.apply(this,arguments)}};T.each({mouseover:"mouseenter",mouseout:"mouseleave"},function(b,d){T.event.special[d]={setup:function(){T.event.add(this,b,ah,d)},teardown:function(){T.event.remove(this,b,ah)}}});T.fn.extend({bind:function(d,b,f){return d=="unload"?this.one(d,b,f):this.each(function(){T.event.add(this,d,f||b,f&&b)})},one:function(d,b,f){var g=T.event.proxy(f||b,function(h){T(this).unbind(h,g);return(f||b).apply(this,arguments)});return this.each(function(){T.event.add(this,d,g,f&&b)})},unbind:function(b,d){return this.each(function(){T.event.remove(this,b,d)})},trigger:function(d,b){return this.each(function(){T.event.trigger(d,b,this)})},triggerHandler:function(f,b){if(this[0]){var d=T.Event(f);d.preventDefault();d.stopPropagation();T.event.trigger(d,b,this[0]);return d.result}},toggle:function(b){var f=arguments,d=1;while(d<f.length){T.event.proxy(b,f[d++])}return this.click(T.event.proxy(b,function(g){this.lastToggle=(this.lastToggle||0)%d;g.preventDefault();return f[this.lastToggle++].apply(this,arguments)||false}))},hover:function(d,b){return this.mouseenter(d).mouseleave(b)},ready:function(b){P();if(T.isReady){b.call(document,T)}else{T.readyList.push(b)}return this},live:function(b,d){var f=T.event.proxy(d);f.guid+=this.selector+b;T(document).bind(Z(b,this.selector),this.selector,f);return this},die:function(b,d){T(document).unbind(Z(b,this.selector),d?{guid:d.guid+this.selector+b}:null);return this}});function af(b){var g=RegExp("(^|\\.)"+b.type+"(\\.|$)"),d=true,f=[];T.each(T.data(this,"events").live||[],function(k,i){if(g.test(i.type)){var h=T(b.target).closest(i.data)[0];if(h){f.push({elem:h,fn:i})}}});f.sort(function(h,i){return T.data(h.elem,"closest")-T.data(i.elem,"closest")});T.each(f,function(){if(this.fn.call(this.elem,b,this.fn.data)===false){return(d=false)}});return d}function Z(b,d){return["live",b,d.replace(/\./g,"`").replace(/ /g,"|")].join(".")}T.extend({isReady:false,readyList:[],ready:function(){if(!T.isReady){T.isReady=true;if(T.readyList){T.each(T.readyList,function(){this.call(document,T)});T.readyList=null}T(document).triggerHandler("ready")}}});var G=false;function P(){if(G){return}G=true;if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);T.ready()},false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);T.ready()}});if(document.documentElement.doScroll&&W==W.top){(function(){if(T.isReady){return}try{document.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}T.ready()})()}}}T.event.add(W,"load",T.ready)}T.each(("blur,focus,load,resize,scroll,unload,click,dblclick,mousedown,mouseup,mousemove,mouseover,mouseout,mouseenter,mouseleave,change,select,submit,keydown,keypress,keyup,error").split(","),function(b,d){T.fn[d]=function(f){return f?this.bind(d,f):this.trigger(d)}});T(W).bind("unload",function(){for(var b in T.cache){if(b!=1&&T.cache[b].handle){T.event.remove(T.cache[b].handle.elem)}}});(function(){T.support={};var i=document.documentElement,h=document.createElement("script"),b=document.createElement("div"),d="script"+(new Date).getTime();b.style.display="none";b.innerHTML='   <link/><table></table><a href="/a" style="color:red;float:left;opacity:.5;">a</a><select><option>text</option></select><object><param/></object>';var g=b.getElementsByTagName("*"),k=b.getElementsByTagName("a")[0];if(!g||!g.length||!k){return}T.support={leadingWhitespace:b.firstChild.nodeType==3,tbody:!b.getElementsByTagName("tbody").length,objectAll:!!b.getElementsByTagName("object")[0].getElementsByTagName("*").length,htmlSerialize:!!b.getElementsByTagName("link").length,style:/red/.test(k.getAttribute("style")),hrefNormalized:k.getAttribute("href")==="/a",opacity:k.style.opacity==="0.5",cssFloat:!!k.style.cssFloat,scriptEval:false,noCloneEvent:true,boxModel:null};h.type="text/javascript";try{h.appendChild(document.createTextNode("window."+d+"=1;"))}catch(f){}i.insertBefore(h,i.firstChild);if(W[d]){T.support.scriptEval=true;delete W[d]}i.removeChild(h);if(b.attachEvent&&b.fireEvent){b.attachEvent("onclick",function(){T.support.noCloneEvent=false;b.detachEvent("onclick",arguments.callee)});b.cloneNode(true).fireEvent("onclick")}T(function(){var l=document.createElement("div");l.style.width=l.style.paddingLeft="1px";document.body.appendChild(l);T.boxModel=T.support.boxModel=l.offsetWidth===2;document.body.removeChild(l).style.display="none"})})();var H=T.support.cssFloat?"cssFloat":"styleFloat";T.props={"for":"htmlFor","class":"className","float":H,cssFloat:H,styleFloat:H,readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",tabindex:"tabIndex"};T.fn.extend({_load:T.fn.load,load:function(h,d,b){if(typeof h!=="string"){return this._load(h)}var f=h.indexOf(" ");if(f>=0){var k=h.slice(f,h.length);h=h.slice(0,f)}var g="GET";if(d){if(T.isFunction(d)){b=d;d=null}else{if(typeof d==="object"){d=T.param(d);g="POST"}}}var i=this;T.ajax({url:h,type:g,dataType:"html",data:d,complete:function(m,l){if(l=="success"||l=="notmodified"){i.html(k?T("<div/>").append(m.responseText.replace(/<script(.|\s)*?\/script>/g,"")).find(k):m.responseText)}if(b){i.each(b,[m.responseText,l,m])}}});return this},serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?T.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/text|hidden|password|search/i.test(this.type))}).map(function(f,d){var b=T(this).val();return b==null?null:T.isArray(b)?T.map(b,function(g,h){return{name:d.name,value:g}}):{name:d.name,value:b}}).get()}});T.each("ajaxStart,ajaxStop,ajaxComplete,ajaxError,ajaxSuccess,ajaxSend".split(","),function(d,b){T.fn[b]=function(f){return this.bind(b,f)}});var N=ad();T.extend({get:function(g,d,b,f){if(T.isFunction(d)){b=d;d=null}return T.ajax({type:"GET",url:g,data:d,success:b,dataType:f})},getScript:function(d,b){return T.get(d,null,b,"script")},getJSON:function(f,d,b){return T.get(f,d,b,"json")},post:function(g,d,b,f){if(T.isFunction(d)){b=d;d={}}return T.ajax({type:"POST",url:g,data:d,success:b,dataType:f})},ajaxSetup:function(b){T.extend(T.ajaxSettings,b)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return W.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest()},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},ajax:function(o){o=T.extend(true,o,T.extend(true,{},T.ajaxSettings,o));var b,v=/=\?(&|$)/g,i,d,u=o.type.toUpperCase();if(o.data&&o.processData&&typeof o.data!=="string"){o.data=T.param(o.data)}if(o.dataType=="jsonp"){if(u=="GET"){if(!o.url.match(v)){o.url+=(o.url.match(/\?/)?"&":"?")+(o.jsonp||"callback")+"=?"}}else{if(!o.data||!o.data.match(v)){o.data=(o.data?o.data+"&":"")+(o.jsonp||"callback")+"=?"}}o.dataType="json"}if(o.dataType=="json"&&(o.data&&o.data.match(v)||o.url.match(v))){b="jsonp"+N++;if(o.data){o.data=(o.data+"").replace(v,"="+b+"$1")}o.url=o.url.replace(v,"="+b+"$1");o.dataType="script";W[b]=function(y){d=y;s();p();W[b]=ab;try{delete W[b]}catch(x){}if(t){t.removeChild(g)}}}if(o.dataType=="script"&&o.cache==null){o.cache=false}if(o.cache===false&&u=="GET"){var w=ad();var f=o.url.replace(/(\?|&)_=.*?(&|$)/,"$1_="+w+"$2");o.url=f+((f==o.url)?(o.url.match(/\?/)?"&":"?")+"_="+w:"")}if(o.data&&u=="GET"){o.url+=(o.url.match(/\?/)?"&":"?")+o.data;o.data=null}if(o.global&&!T.active++){T.event.trigger("ajaxStart")}var k=/^(\w+:)?\/\/([^\/?#]+)/.exec(o.url);if(o.dataType=="script"&&u=="GET"&&k&&(k[1]&&k[1]!=location.protocol||k[2]!=location.host)){var t=document.getElementsByTagName("head")[0];var g=document.createElement("script");g.src=o.url;if(o.scriptCharset){g.charset=o.scriptCharset}if(!b){var m=false;g.onload=g.onreadystatechange=function(){if(!m&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){m=true;s();p();g.onload=g.onreadystatechange=null;t.removeChild(g)}}}t.appendChild(g);return ab}var q=false;var r=o.xhr();if(o.username){r.open(u,o.url,o.async,o.username,o.password)}else{r.open(u,o.url,o.async)}try{if(o.data){r.setRequestHeader("Content-Type",o.contentType)}if(o.ifModified){r.setRequestHeader("If-Modified-Since",T.lastModified[o.url]||"Thu, 01 Jan 1970 00:00:00 GMT")}r.setRequestHeader("X-Requested-With","XMLHttpRequest");r.setRequestHeader("Accept",o.dataType&&o.accepts[o.dataType]?o.accepts[o.dataType]+", */*":o.accepts._default)}catch(h){}if(o.beforeSend&&o.beforeSend(r,o)===false){if(o.global&&!--T.active){T.event.trigger("ajaxStop")}r.abort();return false}if(o.global){T.event.trigger("ajaxSend",[r,o])}var n=function(z){if(r.readyState==0){if(l){clearInterval(l);l=null;if(o.global&&!--T.active){T.event.trigger("ajaxStop")}}}else{if(!q&&r&&(r.readyState==4||z=="timeout")){q=true;if(l){clearInterval(l);l=null}i=z=="timeout"?"timeout":!T.httpSuccess(r)?"error":o.ifModified&&T.httpNotModified(r,o.url)?"notmodified":"success";if(i=="success"){try{d=T.httpData(r,o.dataType,o)}catch(x){i="parsererror"}}if(i=="success"){var y;try{y=r.getResponseHeader("Last-Modified")}catch(x){}if(o.ifModified&&y){T.lastModified[o.url]=y}if(!b){s()}}else{T.handleError(o,r,i)}p();if(z){r.abort()}if(o.async){r=null}}}};if(o.async){var l=setInterval(n,13);if(o.timeout>0){setTimeout(function(){if(r&&!q){n("timeout")}},o.timeout)}}try{r.send(o.data)}catch(h){T.handleError(o,r,null,h)}if(!o.async){n()}function s(){if(o.success){o.success(d,i)}if(o.global){T.event.trigger("ajaxSuccess",[r,o])}}function p(){if(o.complete){o.complete(r,i)}if(o.global){T.event.trigger("ajaxComplete",[r,o])}if(o.global&&!--T.active){T.event.trigger("ajaxStop")}}return r},handleError:function(f,b,g,d){if(f.error){f.error(b,g,d)}if(f.global){T.event.trigger("ajaxError",[b,f,d])}},active:0,httpSuccess:function(b){try{return !b.status&&location.protocol=="file:"||(b.status>=200&&b.status<300)||b.status==304||b.status==1223}catch(d){}return false},httpNotModified:function(d,g){try{var b=d.getResponseHeader("Last-Modified");return d.status==304||b==T.lastModified[g]}catch(f){}return false},httpData:function(b,f,g){var h=b.getResponseHeader("content-type"),i=f=="xml"||!f&&h&&h.indexOf("xml")>=0,d=i?b.responseXML:b.responseText;if(i&&d.documentElement.tagName=="parsererror"){throw"parsererror"}if(g&&g.dataFilter){d=g.dataFilter(d,f)}if(typeof d==="string"){if(f=="script"){T.globalEval(d)}if(f=="json"){d=W["eval"]("("+d+")")}}return d},param:function(g){var d=[];function b(i,h){d[d.length]=encodeURIComponent(i)+"="+encodeURIComponent(h)}if(T.isArray(g)||g.jquery){T.each(g,function(){b(this.name,this.value)})}else{for(var f in g){if(T.isArray(g[f])){T.each(g[f],function(){b(f,this)})}else{b(f,T.isFunction(g[f])?g[f]():g[f])}}}return d.join("&").replace(/%20/g,"+")}});var V={},U,ae=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];function K(d,f){var b={};T.each(ae.concat.apply([],ae.slice(0,f)),function(){b[this]=d});return b}T.fn.extend({show:function(f,b){if(f){return this.animate(K("show",3),f,b)}else{for(var h=0,k=this.length;h<k;h++){var l=T.data(this[h],"olddisplay");this[h].style.display=l||"";if(T.css(this[h],"display")==="none"){var i=this[h].tagName,d;if(V[i]){d=V[i]}else{var g=T("<"+i+" />").appendTo("body");d=g.css("display");if(d==="none"){d="block"}g.remove();V[i]=d}T.data(this[h],"olddisplay",d)}}for(var h=0,k=this.length;h<k;h++){this[h].style.display=T.data(this[h],"olddisplay")||""}return this}},hide:function(d,b){if(d){return this.animate(K("hide",3),d,b)}else{for(var f=0,g=this.length;f<g;f++){var h=T.data(this[f],"olddisplay");if(!h&&h!=="none"){T.data(this[f],"olddisplay",T.css(this[f],"display"))}}for(var f=0,g=this.length;f<g;f++){this[f].style.display="none"}return this}},_toggle:T.fn.toggle,toggle:function(b,d){var f=typeof b==="boolean";return T.isFunction(b)&&T.isFunction(d)?this._toggle.apply(this,arguments):b==null||f?this.each(function(){var g=f?b:T(this).is(":hidden");T(this)[g?"show":"hide"]()}):this.animate(K("toggle",3),b,d)},fadeTo:function(f,b,d){return this.animate({opacity:b},f,d)},animate:function(b,g,d,f){var h=T.speed(g,d,f);return this[h.queue===false?"each":"queue"](function(){var k=T.extend({},h),m,i=this.nodeType==1&&T(this).is(":hidden"),l=this;for(m in b){if(b[m]=="hide"&&i||b[m]=="show"&&!i){return k.complete.call(this)}if((m=="height"||m=="width")&&this.style){k.display=T.css(this,"display");k.overflow=this.style.overflow}}if(k.overflow!=null){this.style.overflow="hidden"}k.curAnim=T.extend({},b);T.each(b,function(s,o){var p=new T.fx(l,k,s);if(/toggle|show|hide/.test(o)){p[o=="toggle"?i?"show":"hide":o](b)}else{var q=o.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),n=p.cur(true)||0;if(q){var t=parseFloat(q[2]),r=q[3]||"px";if(r!="px"){l.style[s]=(t||1)+r;n=((t||1)/p.cur(true))*n;l.style[s]=n+r}if(q[1]){t=((q[1]=="-="?-1:1)*t)+n}p.custom(n,t,r)}else{p.custom(n,o,"")}}});return true})},stop:function(d,f){var b=T.timers;if(d){this.queue([])}this.each(function(){for(var g=b.length-1;g>=0;g--){if(b[g].elem==this){if(f){b[g](true)}b.splice(g,1)}}});if(!f){this.dequeue()}return this}});T.each({slideDown:K("show",1),slideUp:K("hide",1),slideToggle:K("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(d,b){T.fn[d]=function(g,f){return this.animate(b,g,f)}});T.extend({speed:function(d,b,f){var g=typeof d==="object"?d:{complete:f||!f&&b||T.isFunction(d)&&d,duration:d,easing:f&&b||b&&!T.isFunction(b)&&b};g.duration=T.fx.off?0:typeof g.duration==="number"?g.duration:T.fx.speeds[g.duration]||T.fx.speeds._default;g.old=g.complete;g.complete=function(){if(g.queue!==false){T(this).dequeue()}if(T.isFunction(g.old)){g.old.call(this)}};return g},easing:{linear:function(d,b,g,f){return g+f*d},swing:function(d,b,g,f){return((-Math.cos(d*Math.PI)/2)+0.5)*f+g}},timers:[],fx:function(d,f,b){this.options=f;this.elem=d;this.prop=b;if(!f.orig){f.orig={}}}});T.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(T.fx.step[this.prop]||T.fx.step._default)(this);if((this.prop=="height"||this.prop=="width")&&this.elem.style){this.elem.style.display="block"}},cur:function(b){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var d=parseFloat(T.css(this.elem,this.prop,b));return d&&d>-10000?d:parseFloat(T.curCSS(this.elem,this.prop))||0},custom:function(b,d,f){this.startTime=ad();this.start=b;this.end=d;this.unit=f||this.unit||"px";this.now=this.start;this.pos=this.state=0;var h=this;function g(i){return h.step(i)}g.elem=this.elem;if(g()&&T.timers.push(g)&&!U){U=setInterval(function(){var i=T.timers;for(var k=0;k<i.length;k++){if(!i[k]()){i.splice(k--,1)}}if(!i.length){clearInterval(U);U=ab}},13)}},show:function(){this.options.orig[this.prop]=T.attr(this.elem.style,this.prop);this.options.show=true;this.custom(this.prop=="width"||this.prop=="height"?1:0,this.cur());T(this.elem).show()},hide:function(){this.options.orig[this.prop]=T.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(f){var g=ad();if(f||g>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;var i=true;for(var h in this.options.curAnim){if(this.options.curAnim[h]!==true){i=false}}if(i){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(T.css(this.elem,"display")=="none"){this.elem.style.display="block"}}if(this.options.hide){T(this.elem).hide()}if(this.options.hide||this.options.show){for(var d in this.options.curAnim){T.attr(this.elem.style,d,this.options.orig[d])}}this.options.complete.call(this.elem)}return false}else{var b=g-this.startTime;this.state=b/this.options.duration;this.pos=T.easing[this.options.easing||(T.easing.swing?"swing":"linear")](this.state,b,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update()}return true}};T.extend(T.fx,{speeds:{slow:600,fast:200,_default:400},step:{opacity:function(b){T.attr(b.elem.style,"opacity",b.now)},_default:function(b){if(b.elem.style&&b.elem.style[b.prop]!=null){b.elem.style[b.prop]=b.now+b.unit}else{b.elem[b.prop]=b.now}}}});if(document.documentElement.getBoundingClientRect){T.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return T.offset.bodyOffset(this[0])}var i=this[0].getBoundingClientRect(),f=this[0].ownerDocument,k=f.body,l=f.documentElement,b=l.clientTop||k.clientTop||0,d=l.clientLeft||k.clientLeft||0,g=i.top+(self.pageYOffset||T.boxModel&&l.scrollTop||k.scrollTop)-b,h=i.left+(self.pageXOffset||T.boxModel&&l.scrollLeft||k.scrollLeft)-d;return{top:g,left:h}}}else{T.fn.offset=function(){if(!this[0]){return{top:0,left:0}}if(this[0]===this[0].ownerDocument.body){return T.offset.bodyOffset(this[0])}T.offset.initialized||T.offset.initialize();var i=this[0],m=i.offsetParent,n=i,b=i.ownerDocument,f,l=b.documentElement,h=b.body,g=b.defaultView,o=g.getComputedStyle(i,null),d=i.offsetTop,k=i.offsetLeft;while((i=i.parentNode)&&i!==h&&i!==l){f=g.getComputedStyle(i,null);d-=i.scrollTop,k-=i.scrollLeft;if(i===m){d+=i.offsetTop,k+=i.offsetLeft;if(T.offset.doesNotAddBorder&&!(T.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(i.tagName))){d+=parseInt(f.borderTopWidth,10)||0,k+=parseInt(f.borderLeftWidth,10)||0}n=m,m=i.offsetParent}if(T.offset.subtractsBorderForOverflowNotVisible&&f.overflow!=="visible"){d+=parseInt(f.borderTopWidth,10)||0,k+=parseInt(f.borderLeftWidth,10)||0}o=f}if(o.position==="relative"||o.position==="static"){d+=h.offsetTop,k+=h.offsetLeft}if(o.position==="fixed"){d+=Math.max(l.scrollTop,h.scrollTop),k+=Math.max(l.scrollLeft,h.scrollLeft)}return{top:d,left:k}}}T.offset={initialize:function(){if(this.initialized){return}var f=document.body,m=document.createElement("div"),k,l,b,i,d,n,h=f.style.marginTop,g='<div style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;"><div></div></div><table style="position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;" cellpadding="0" cellspacing="0"><tr><td></td></tr></table>';d={position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"};for(n in d){m.style[n]=d[n]}m.innerHTML=g;f.insertBefore(m,f.firstChild);k=m.firstChild,l=k.firstChild,i=k.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(l.offsetTop!==5);this.doesAddBorderForTableAndCells=(i.offsetTop===5);k.style.overflow="hidden",k.style.position="relative";this.subtractsBorderForOverflowNotVisible=(l.offsetTop===-5);f.style.marginTop="1px";this.doesNotIncludeMarginInBodyOffset=(f.offsetTop===0);f.style.marginTop=h;f.removeChild(m);this.initialized=true},bodyOffset:function(f){T.offset.initialized||T.offset.initialize();var b=f.offsetTop,d=f.offsetLeft;if(T.offset.doesNotIncludeMarginInBodyOffset){b+=parseInt(T.curCSS(f,"marginTop",true),10)||0,d+=parseInt(T.curCSS(f,"marginLeft",true),10)||0}return{top:b,left:d}}};T.fn.extend({position:function(){var d=0,f=0,h;if(this[0]){var g=this.offsetParent(),b=this.offset(),i=/^body|html$/i.test(g[0].tagName)?{top:0,left:0}:g.offset();b.top-=Y(this,"marginTop");b.left-=Y(this,"marginLeft");i.top+=Y(g,"borderTopWidth");i.left+=Y(g,"borderLeftWidth");h={top:b.top-i.top,left:b.left-i.left}}return h},offsetParent:function(){var b=this[0].offsetParent||document.body;while(b&&(!/^body|html$/i.test(b.tagName)&&T.css(b,"position")=="static")){b=b.offsetParent}return T(b)}});T.each(["Left","Top"],function(d,f){var b="scroll"+f;T.fn[b]=function(g){if(!this[0]){return null}return g!==ab?this.each(function(){this==W||this==document?W.scrollTo(!d?g:T(W).scrollLeft(),d?g:T(W).scrollTop()):this[b]=g}):this[0]==W||this[0]==document?self[d?"pageYOffset":"pageXOffset"]||T.boxModel&&document.documentElement[b]||document.body[b]:this[0][b]}});T.each(["Height","Width"],function(d,g){var i=d?"Left":"Top",f=d?"Right":"Bottom",h=g.toLowerCase();T.fn["inner"+g]=function(){return this[0]?T.css(this[0],h,false,"padding"):null};T.fn["outer"+g]=function(k){return this[0]?T.css(this[0],h,false,k?"margin":"border"):null};var b=g.toLowerCase();T.fn[b]=function(k){return this[0]==W?document.compatMode=="CSS1Compat"&&document.documentElement["client"+g]||document.body["client"+g]:this[0]==document?Math.max(document.documentElement["client"+g],document.body["scroll"+g],document.documentElement["scroll"+g],document.body["offset"+g],document.documentElement["offset"+g]):k===ab?(this.length?T.css(this[0],b):null):this.css(b,typeof k==="string"?k:k+"px")}})})();window.jq4gv=jQuery.noConflict(true);jq4gv(document).ready(function(){tb_init("a.thickbox, area.thickbox, input.thickbox")});function tb_init(b){jq4gv(b).click(function(){var f=this.title||this.name||null;var d=this.href||this.alt;var h=this.rel||false;tb_show(f,d,h);return false})}function tb_show(b,d,f){try{if(typeof document.body.style.maxHeight==="undefined"){jq4gv("body","html").css({height:"100%",width:"100%"});jq4gv("html").css("overflow","hidden");if(document.getElementById("TB_HideSelect")===null){jq4gv("body").append("<iframe id='TB_HideSelect'></iframe><div id='TB_overlay'></div><div id='TB_window'></div>");jq4gv("#TB_overlay").click(tb_remove)}}else{if(document.getElementById("TB_overlay")===null){jq4gv("body").append("<div id='TB_overlay'></div><div id='TB_window'></div>");jq4gv("#TB_overlay").click(tb_remove)}}if(tb_detectMacXFF()){jq4gv("#TB_overlay").addClass("TB_overlayMacFFBGHack")}else{jq4gv("#TB_overlay").addClass("TB_overlayBG")}if(b===null){b=""}var g;if(d.indexOf("?")!==-1){g=d.substr(0,d.indexOf("?"))}else{g=d}var k=d.replace(/^[^\?]+\??/,"");var i=tb_parseQuery(k);TB_WIDTH=(i.width*1)+30||630;TB_HEIGHT=(i.height*1)+40||440;ajaxContentW=TB_WIDTH-30;ajaxContentH=TB_HEIGHT-45;if(jq4gv("#TB_window").css("display")!="block"){if(i.modal!="true"){jq4gv("#TB_window").append("<div id='TB_title'><div id='TB_ajaxWindowTitle'>"+b+"</div><div id='TB_closeAjaxWindow'><a href='#' id='TB_closeWindowButton'>close</a> or Esc Key</div></div><div id='TB_ajaxContent' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px'></div>")}else{jq4gv("#TB_overlay").unbind();jq4gv("#TB_window").append("<div id='TB_ajaxContent' class='TB_modal' style='width:"+ajaxContentW+"px;height:"+ajaxContentH+"px;'></div>")}}else{jq4gv("#TB_ajaxContent")[0].style.width=ajaxContentW+"px";jq4gv("#TB_ajaxContent")[0].style.height=ajaxContentH+"px";jq4gv("#TB_ajaxContent")[0].scrollTop=0;jq4gv("#TB_ajaxWindowTitle").html(b)}jq4gv("#TB_closeWindowButton").click(tb_remove);jq4gv("#TB_ajaxContent").html(jq4gv("#"+i.inlineId).html());jq4gv("#TB_window").unload(function(){jq4gv("#"+i.inlineId).html(jq4gv("#TB_ajaxContent").html())});tb_position();jq4gv("#TB_load").remove();jq4gv("#TB_window").css({display:"block"});document.onkeyup=function(l){if(l==null){keycode=event.keyCode}else{keycode=l.which}if(keycode==27){tb_remove()}};if(i.focus!=null){jq4gv("#"+i.focus).focus()}}catch(h){}}function tb_remove(){jq4gv("#TB_imageOff").unbind("click");jq4gv("#TB_closeWindowButton").unbind("click");jq4gv("#TB_window").fadeOut("fast",function(){jq4gv("#TB_window,#TB_overlay,#TB_HideSelect").trigger("unload").unbind().remove()});jq4gv("#TB_load").remove();if(typeof document.body.style.maxHeight=="undefined"){jq4gv("body","html").css({height:"auto",width:"auto"});jq4gv("html").css("overflow","")}document.onkeydown="";document.onkeyup="";return false}function tb_position(){jq4gv("#TB_window").css({marginLeft:"-"+parseInt((TB_WIDTH/2),10)+"px",width:TB_WIDTH+"px"});if(!(jq4gv.browser.msie&&jq4gv.browser.version<7)){jq4gv("#TB_window").css({marginTop:"-"+parseInt((TB_HEIGHT/2),10)+"px"})}}function tb_parseQuery(g){var h={};if(!g){return h}var b=g.split(/[;&]/);for(var f=0;f<b.length;f++){var l=b[f].split("=");if(!l||l.length!=2){continue}var d=unescape(l[0]);var k=unescape(l[1]);k=k.replace(/\+/g," ");h[d]=k}return h}function tb_getPageSize(){var f=document.documentElement;var b=window.innerWidth||self.innerWidth||(f&&f.clientWidth)||document.body.clientWidth;var d=window.innerHeight||self.innerHeight||(f&&f.clientHeight)||document.body.clientHeight;arrayPageSize=[b,d];return arrayPageSize}function tb_detectMacXFF(){var b=navigator.userAgent.toLowerCase();if(b.indexOf("mac")!=-1&&b.indexOf("firefox")!=-1){return true}}var jsGameViewer=function(){return{name:"jsgameviewer",version:"1.0a",length:0,WEIQI:0,DAOQI:1,EN_US:"en_us",ZH_CN:"zh_cn",LOCALES:["en_us","zh_cn"],CONFIG:{baseDir:"/jsgameviewer/",viewDir:"/jsgameviewer/view/",locale:jsgvTranslations.locale,gameType:0,boardSize:19,playerInterval:5,observerInterval:15,container:null},debug:function(b){if(typeof(console)!="undefined"){console.log(b)}},getGameId:function(b){if(b==undefined){this.length++;for(b=1;this["GV"+b]!=null;b++){}}return"GV"+b},createClass:function(){return function(){this.initialize.apply(this,arguments)}},clone:function(f){if(typeof(f)!="object"){return f}if(f==null){return f}var d=new Object();for(var b in f){d[b]=this.clone(f[b])}return d},notNull:function(b){return b!=undefined&&b!=null&&jq4gv.trim(b).length>0},getId:function(b,d){return b+"-"+d},showAjaxError:function(f,d){var b=jsgvTranslations.error_thrown+"\n";if(f!=undefined){b+=f+" "}if(d!=undefined){b+=d}alert(b.substr(0,1000))}}}();var jsgv=jsGameViewer;jsGameViewer.model=function(){var v=0;var A=1;var t=2;var f=3;var C=0;var r=1;var p=2;var s=0;var E=1;var n=2;var z=0;var u=1;var h=2;var i=3;var y=4;var k=5;var b=6;var w=7;var l=8;var q=9;var m=jsGameViewer.createClass();jq4gv.extend(m.prototype,{initialize:function(G,F){this.val=G;this.depth=0;if(F!=undefined&&F!=null){this.depth=F}}});var D=jsGameViewer.createClass();jq4gv.extend(D.prototype,{initialize:function(F,J,G,H,I){this.x=F;this.y=J;this.id=F+"-"+J;this.color=0;if(G!=undefined&&G!=null){this.color=G}this.moveNumber=null;if(H!=undefined&&H!=null){this.moveNumber=H}this.deleteFlag=false;if(I){this.deleteFlag=true}}});var x=jsGameViewer.createClass();jq4gv.extend(x,Array);jq4gv.extend(x.prototype,{initialize:function(F,G){this.gameType=F;this.size=G;this.reset()},isNeighbor:function(G,I,F,H){if(this.gameType==jsGameViewer.DAOQI){if(G==F){return I==(H+1)%this.size||I==(H-1+this.size)%this.size}if(I==H){return G==(F+1)%this.size||G==(F-1+this.size)%this.size}return false}else{if(G==F){return I==H+1||I==H-1}if(I==H){return G==F+1||G==F-1}return false}},normalize:function(F){if(F<0){return F+this.size}if(F>=this.size){return F-this.size}return F},reset:function(){for(var F=0;F<this.size;F++){this[F]=new Array(this.size);for(j=0;j<this.size;j++){this[F][j]=0}}},copyFrom:function(F){for(var H=0;H<this.size;H++){for(var G=0;G<this.size;G++){this[H][G]=F[H][G]}}},getDeadGroup:function(F,H){if(this.gameType==jsGameViewer.DAOQI){F=this.normalize(F);H=this.normalize(H)}else{if(F<0||F>=this.size||H<0||H>=this.size){return null}}if(this[F][H]==0){return null}if(this.gameType==jsGameViewer.DAOQI){if(this[this.normalize(F-1)][H]==0||this[this.normalize(F+1)][H]==0||this[F][this.normalize(H-1)]==0||this[F][this.normalize(H+1)]==0){return null}}else{if((F>0&&this[F-1][H]==0)||(F<this.size-1&&this[F+1][H]==0)||(H>0&&this[F][H-1]==0)||(H<this.size-1&&this[F][H+1]==0)){return null}}var G=new Array();G.color=this[F][H];G.push([F,H]);G[F+"-"+H]=true;if(this.gameType==jsGameViewer.DAOQI){if(this.expandDeadGroup(G,F-1,H)){return null}if(this.expandDeadGroup(G,F+1,H)){return null}if(this.expandDeadGroup(G,F,H-1)){return null}if(this.expandDeadGroup(G,F,H+1)){return null}}else{if(F>0&&this.expandDeadGroup(G,F-1,H)){return null}if(F<this.size-1&&this.expandDeadGroup(G,F+1,H)){return null}if(H>0&&this.expandDeadGroup(G,F,H-1)){return null}if(H<this.size-1&&this.expandDeadGroup(G,F,H+1)){return null}}return G},expandDeadGroup:function(G,F,H){if(this.gameType==jsGameViewer.DAOQI){F=this.normalize(F);H=this.normalize(H)}if(G[F+"-"+H]!=null){return false}if(this[F][H]!=G.color){return false}if(this.gameType==jsGameViewer.DAOQI){if(this[this.normalize(F-1)][H]==0||this[this.normalize(F+1)][H]==0||this[F][this.normalize(H-1)]==0||this[F][this.normalize(H+1)]==0){return true}}else{if((F>0&&this[F-1][H]==0)||(F<this.size-1&&this[F+1][H]==0)||(H>0&&this[F][H-1]==0)||(H<this.size-1&&this[F][H+1]==0)){return true}}G.push([F,H]);G[F+"-"+H]=true;if(this.gameType==jsGameViewer.DAOQI){if(this.expandDeadGroup(G,F-1,H)){return true}if(this.expandDeadGroup(G,F+1,H)){return true}if(this.expandDeadGroup(G,F,H-1)){return true}if(this.expandDeadGroup(G,F,H+1)){return true}}else{if(F>0&&this.expandDeadGroup(G,F-1,H)){return true}if(F<this.size-1&&this.expandDeadGroup(G,F+1,H)){return true}if(H>0&&this.expandDeadGroup(G,F,H-1)){return true}if(H<this.size-1&&this.expandDeadGroup(G,F,H+1)){return true}}return false}});var B=jsGameViewer.createClass();jq4gv.extend(B.prototype,{initialize:function(F){this.type=s;this.parent=F;this.children=new Array();this.moveNumber=0;this.depth=0;this.points=new Array();this.processed=false;this.blackPrisoners=0;this.blackPrisonerPoints=[];this.whitePrisoners=0;this.whitePrisonerPoints=[]},isRoot:function(){return this.parent==null},hasChildren:function(){return this.children.length>0},firstChild:function(){if(this.children.length>0){return this.children[0]}return null},childThatMatches:function(F,I){for(var G=0;G<this.children.length;G++){var H=this.children[G];if(H.x==F&&H.y==I){return G}}return null},isOnBranch:function(){return this.depth>1},isDummyNode:function(){return this.type==s&&!this.isRoot()&&this.comment==null&&this.marks==null},hasComment:function(){return this.comment!=undefined&&this.comment!=null&&jq4gv.trim(this.comment).length>0},hasBranches:function(){return this.children.length>1},toString:function(){var F="";var G="EMPTY";if(this.type==E){G="MOVE"}else{if(this.type==n){G="PASS"}}var H=F+"Node("+G+", "+this.moveNumber;if(this.type==E||this.type==n){H+=", "+(this.color==A?"black":"white")}if(this.type==E){H+=", "+this.x+","+this.y}H+=")";return H}});var g=jsGameViewer.createClass();jq4gv.extend(g.prototype,{initialize:function(F){this.type=F;this.charset="";this.name="";this.boardSize=19;this.rule="";this.handicap=0;this.komi=0;this.blackName="";this.blackRank="";this.whiteName="";this.whiteRank="";this.date="";this.place="";this.result="";this._moves=0;this.rootNode=new B(null)},isFinished:function(){return this.result&&this.result.length>0},getMoves:function(){if(this._moves==0){var F=this.rootNode;while(F.hasChildren()){F=F.children[0];if(F.moveNumber!=undefined&&F.moveNumber!=null){this._moves=F.moveNumber}}}return this._moves},getFirstPlayer:function(){if(!this.firstPlayer){if(this.handicap>1){this.firstPlayer=t}else{var F=this.rootNode;while(this.firstPlayer==v&&F.hasChildren()){F=F.children[0];if(F.type==E||F.type==n){this.firstPlayer=F.color}}}}return this.firstPlayer},getId:function(){var F=this.url;return F},getTitle:function(){var F="";if(this.name){F+=this.name+": "}if(this.whiteName){F+=this.whiteName}else{F+="Unknown Player"}F+="(W) - ";if(c.game.blackName){F+=c.game.blackName}else{F+="Unknown Player"}F+="(B)";if(this.result){F+="   "+this.result}if(this.date){F+="   "+this.date}if(this.place){F+="   "+this.place}return F}});var o=jsGameViewer.createClass();jq4gv.extend(o.prototype,{initialize:function(F){this.game=F;this.board=new x(F.type,F.boardSize);this.currentNode=F.rootNode;this.rootNode=this.currentNode;this.blackPrisoners=0;this.blackPrisonerPoints=[];this.whitePrisoners=0;this.whitePrisonerPoints=[];this.moveNumbers=new Object();this.tempMoves=new Array();this.processCurrentNode()},isFirst:function(){return this.currentNode.isRoot()},isLast:function(){return !this.currentNode.hasChildren()},isOnBranch:function(){return this.currentNode.isOnBranch()},getXYs:function(){var F=this.currentNode;var G=[];while(F){if(F.type==E){G.unshift([F.x,F.y])}F=F.parent}return G},getNextPlayer:function(){if(this.currentNode==this.rootNode){return this.game.getFirstPlayer()}var G=this.currentNode;var F=G.color;while(F!=A&&F!=t&&!G.isRoot()){G=G.parent;F=G.color}if(F==A){F=t}else{if(F==t){F=A}else{G=this.currentNode;while(F!=A&&F!=t&&G.hasChildren()){G=G.children[0];F=G.color}}}if(!F||F==v){F=A}return F},getMoveNumber:function(G,H){var F=this.moveNumbers[jsGameViewer.getId(G,H)];if(F instanceof Number){return F}if(F!=undefined&&F!=null){return F.val}return 0},handleDeadGroup:function(G){var F=this;if(G!=null){if(G.color==A){F.currentNode.blackPrisoners+=G.length;F.blackPrisoners+=G.length}else{F.currentNode.whitePrisoners+=G.length;F.whitePrisoners+=G.length}jq4gv.each(G,function(J,L){var I=L[0],N=L[1],K=F.moveNumbers[jsGameViewer.getId(I,N)];var M=[I,N,G.color,K,F.currentNode.moveNumber];if(G.color==A){F.currentNode.blackPrisonerPoints.push(M);F.blackPrisonerPoints.push(M)}else{F.currentNode.whitePrisonerPoints.push(M);F.whitePrisonerPoints.push(M)}F.board[I][N]=0;var H=new D(I,N,G.color,K,true);F.currentNode.points.push(H);delete F.moveNumbers[jsGameViewer.getId(I,N)]})}},processCurrentNode:function(){var G=this;var L=this.board;var H=this.currentNode;if(H.processed){for(var J=0;J<H.points.length;J++){var P=H.points[J];if(P.deleteFlag){L[P.x][P.y]=0}else{L[P.x][P.y]=P.color}this.moveNumbers[jsGameViewer.getId(P.x,P.y)]=P.moveNumber}if(H.blackPrisoners>0){this.blackPrisoners+=H.blackPrisoners;this.blackPrisonerPoints=this.blackPrisonerPoints.concat(H.blackPrisonerPoints)}if(H.whitePrisoners>0){this.whitePrisoners+=H.whitePrisoners;this.whitePrisonerPoints=this.whitePrisonerPoints.concat(H.whitePrisonerPoints)}return}H.processed=true;switch(H.type){case s:jq4gv.each(H.points,function(V,T){var S=T.x,X=T.y,U=T.color;if(S<0||S>=L.size||X<0||X>=L.size){return}switch(U){case f:T.color=L[S][X];T.deleteFlag=true;var W=[S,X,T.color,G.moveNumbers[jsGameViewer.getId(S,X)],H.moveNumber];if(T.color==A){H.blackPrisoners++;G.blackPrisoners++;H.blackPrisonerPoints.push(W);G.blackPrisonerPoints.push(W)}else{if(T.color==t){H.whitePrisoners++;G.whitePrisoners++;H.whitePrisonerPoints.push(W);G.whitePrisonerPoints.push(W)}}L[S][X]=0;break;case A:case t:L[S][X]=U;break}});break;case E:var O=H.x,M=H.y,I=H.color,R=this.game.boardSize;if(O<0||O>=R||M<0||M>=R){throw"Invalid point: ("+O+","+M+")"}L[O][M]=I;var Q=new m(H.moveNumber,H.depth);G.moveNumbers[jsGameViewer.getId(O,M)]=Q;var P=new D(O,M,I,Q);H.points.push(P);var K=(I==A)?t:A;if(G.game.type==jsGameViewer.DAOQI){var F=L.normalize(O-1);var N=M;if(L[F][N]==K){this.handleDeadGroup(L.getDeadGroup(F,N))}F=L.normalize(O+1);N=M;if(L[F][N]==K){this.handleDeadGroup(L.getDeadGroup(F,N))}F=O;N=L.normalize(M-1);if(L[F][N]==K){this.handleDeadGroup(L.getDeadGroup(F,N))}F=O;N=L.normalize(M+1);if(L[F][N]==K){this.handleDeadGroup(L.getDeadGroup(F,N))}}else{if(O>0){var F=O-1,N=M;if(L[F][N]==K){this.handleDeadGroup(L.getDeadGroup(F,N))}}if(O<L.size-1){var F=O+1,N=M;if(L[F][N]==K){this.handleDeadGroup(L.getDeadGroup(F,N))}}if(M>0){var F=O,N=M-1;if(L[F][N]==K){this.handleDeadGroup(L.getDeadGroup(F,N))}}if(M<L.size-1){var F=O,N=M+1;if(L[F][N]==K){this.handleDeadGroup(L.getDeadGroup(F,N))}}}this.handleDeadGroup(L.getDeadGroup(O,M));break;case n:break}if(!H.hasChildren()){if(!H.isOnBranch()&&this.last==null){G.last=new Object();G.last.node=H;G.last.board=jsGameViewer.clone(L);G.last.moveNumbers=jsGameViewer.clone(this.moveNumbers);G.last.blackPrisoners=this.blackPrisoners;G.last.blackPrisonerPoints=jsGameViewer.clone(this.blackPrisonerPoints);G.last.whitePrisoners=this.whitePrisoners;G.last.whitePrisonerPoints=jsGameViewer.clone(this.whitePrisonerPoints)}}},play:function(L,K){var I=this.board;if(L<0||L>=I.size||K<0||K>=I.size){return false}if(I[L][K]!=0){return false}var J=this.getNextPlayer();var G=(J==A)?t:A;I[L][K]=J;var H=0;if(L>0&&I[L-1][K]==G){var N=I.getDeadGroup(L-1,K);if(N!=null){H=N.length}}if(H<2&&L<I.size-1&&I[L+1][K]==G){var N=I.getDeadGroup(L+1,K);if(N!=null){H=+N.length}}if(H<2&&K>0&&I[L][K-1]==G){var N=I.getDeadGroup(L,K-1);if(N!=null){H=+N.length}}if(H<2&&K<I.size-1&&I[L][K+1]==G){var N=I.getDeadGroup(L,K+1);if(N!=null){H=+N.length}}var F=true;if(H==1){if(this.currentNode.type==E){if(I.isNeighbor(L,K,this.currentNode.x,this.currentNode.y)&&(this.currentNode.blackPrisoners==1||this.currentNode.whitePrisoners==1)){F=false}}}else{if(H==0){var N=I.getDeadGroup(L,K);if(N!=null&&N.length>0){F=false}}}if(!F){I[L][K]=0;return false}var M=new B(this.currentNode);M.temp=true;M.type=E;M.x=L;M.y=K;M.color=J;M.moveNumber=this.currentNode.moveNumber+1;if(this.currentNode.children.length==0){M.depth=this.currentNode.depth}else{M.depth=this.currentNode.depth+1}if(!M.isOnBranch()){this.last=null}this.currentNode.children.push(M);this.tempMoves.push([L,K]);return this.goToBranch(this.currentNode.children.length-1)},canRemove:function(){if(this.currentNode.temp){return true}else{return false}},remove:function(){if(this.canRemove()){var H=this.currentNode;var G=H.parent;var F=0;for(F=0;F<G.children.length;F++){if(G.children[F]==H){break}}this.back();G.children.splice(F,1);if(!H.isOnBranch()){this.last=null}}},back:function(){if(this.currentNode.isRoot()){return false}for(var G=0;G<this.currentNode.points.length;G++){var F=this.currentNode.points[G];if(F.deleteFlag){this.board[F.x][F.y]=F.color;this.moveNumbers[jsGameViewer.getId(F.x,F.y)]=F.moveNumber}else{this.board[F.x][F.y]=v;delete this.moveNumbers[jsGameViewer.getId(F.x,F.y)]}}if(this.currentNode.blackPrisoners>0){this.blackPrisoners-=this.currentNode.blackPrisoners;for(var G=0;G<this.currentNode.blackPrisoners;G++){if(this.blackPrisonerPoints.length>0){this.blackPrisonerPoints.pop()}}}if(this.currentNode.whitePrisoners>0){this.whitePrisoners-=this.currentNode.whitePrisoners;for(var G=0;G<this.currentNode.whitePrisoners;G++){if(this.whitePrisonerPoints.length>0){this.whitePrisonerPoints.pop()}}}this.currentNode=this.currentNode.parent;return true},backAll:function(){this.currentNode=this.rootNode;this.board.reset();this.moveNumbers=new Object();this.blackPrisoners=0;this.blackPrisonerPoints=[];this.whitePrisoners=0;this.whitePrisonerPoints=[];var F=this.board;jq4gv.each(this.currentNode.points,function(H,G){F[G.x][G.y]=G.color})},forward:function(){if(!this.currentNode.hasChildren()){return false}this.currentNode=this.currentNode.children[0];this.processCurrentNode();return true},forwardAll:function(){if(this.isOnBranch()||this.last==null){while(this.forward()){}}else{this.currentNode=this.last.node;this.board.copyFrom(this.last.board);this.moveNumbers=jsGameViewer.clone(this.last.moveNumbers);this.blackPrisoners=this.last.blackPrisoners;this.blackPrisonerPoints=jsGameViewer.clone(this.last.blackPrisonerPoints);this.whitePrisoners=this.last.whitePrisoners;this.whitePrisonerPoints=jsGameViewer.clone(this.last.whitePrisonerPoints)}},goToBranch:function(F){if(!this.currentNode.hasChildren()){return false}if(this.currentNode.children.length<=F){return false}this.currentNode=this.currentNode.children[F];this.processCurrentNode();return true}});var d=new Array();jq4gv.extend(d,{max:30,save:function(H){var J=H.game.getId();var F=null;for(var G=0;G<this.length;G++){if(this[G]==J){F=G;break}}if(F!=null&&F>0){for(var G=0;G<F-1;G++){this[G+1]=this[G]}}else{this.unshift(J);if(this.length>this.max){var I=this.pop();delete this[I]}}this[0]=J;this[J]=H}});return{STONE_NONE:v,STONE_BLACK:A,STONE_WHITE:t,STONE_ERASE:f,MODE_NORMAL:C,MODE_EDIT:r,MODE_SCORE:p,NODE_EMPTY:s,NODE_MOVE:E,NODE_PASS:n,MARK_NONE:z,MARK_SQUARE:u,MARK_CIRCLE:h,MARK_TRIANGLE:i,MARK_CROSS:y,MARK_TEXT:k,MARK_NUMBER:b,MARK_TERR_BLACK:w,MARK_TERR_WHITE:l,MARK_STONE:q,MoveNumber:m,Point:D,Board:x,Game:g,GameState:o,Node:B,GameHistory:d}}();jsGameViewer.SGFParser=jsGameViewer.createClass();jsGameViewer.SGFParser.prototype=function(){var J=jsGameViewer.WEIQI;var m=jsGameViewer.model.Game;var r=jsGameViewer.model.Node;var p=jsGameViewer.model.Point;var D=jsGameViewer.model.STONE_NONE;var z=jsGameViewer.model.STONE_BLACK;var H=jsGameViewer.model.STONE_WHITE;var I=jsGameViewer.model.NODE_MOVE;var y=jsGameViewer.model.NODE_PASS;var x=97;var b=0;var K=1;var k=2;var d=0;var l=1;var E=2;var N=3;var i=4;var A=5;var M=6;var L=7;var s=0;var w=1;var G=2;var C=3;var g=4;var B=5;var n=6;var u=7;var t="10";function f(P){this.gameType=P}function O(S,R,P){var Q;if(S!=-1){Q=S}else{if(R!=-1){Q=R}else{Q=P}}if(S<Q&&S!=-1){Q=S}if(R<Q&&R!=-1){Q=R}if(P<Q&&P!=-1){Q=P}return Q}function v(P,Q){while(true){c=P.charAt(Q);if(c==" "||c=="\t"||c=="\n"||c=="\r"){Q++}else{break}}return Q}function q(P,S,R){var Q="SGFParser: ";if(S>0){Q+=P.substring(0,S-1)}Q+="{PARSING FAILED HERE: ";if(R!=undefined&&R!=null){Q+=R}Q+="}";if(S<P.length){Q+=P.substring(S)}return Q}function F(R,T){var S;var Q=R.length;var P="";S=R.indexOf(T+"[");if(S==-1){return P}S+=2;if(R.charAt(S)!="["){throw q(R,S)}while(R.charAt(++S)!="]"&&S<Q){P+=R.charAt(S)}if(S>Q){throw q(R,S)}return P}function h(Q){var P=new m(this.gameType);R=F(Q,"GM");if(R.length>0&&t==R){P.type=DAOQI}var R=F(Q,"SZ");if(R.length>0){try{P.boardSize=parseInt(R)}catch(S){throw q(Q,Q.indexOf("SZ["))}}R=F(Q,"GN");if(R.length>0){P.name=R}R=F(Q,"CA");if(R.length>0){P.charset=R}R=F(Q,"PW");if(R.length>0){P.whiteName=R}R=F(Q,"WR");if(R.length>0){P.whiteRank=R}R=F(Q,"PB");if(R.length>0){P.blackName=R}R=F(Q,"BR");if(R.length>0){P.blackRank=R}R=F(Q,"RU");if(R.length>0){P.rule=R}R=F(Q,"KM");if(R.length>0){try{P.komi=parseFloat(R)}catch(S){throw q(Q,Q.indexOf("KM["))}}R=F(Q,"HA");if(R.length>0){try{P.handicap=parseInt(R)}catch(S){throw q(Q,Q.indexOf("HA["))}}R=F(Q,"RE");if(R.length>0){P.result=R}R=F(Q,"DT");if(R.length>0){P.date=R}R=F(Q,"PC");if(R.length>0){P.place=R}return P}function o(ab){var X=0;try{ab=ab.replace(/&/g,"&amp;");ab=ab.replace(/</g,"&lt;");var ao=h(ab);var T=ab.length;var V=b;var X=0;var P=0;var ae=0;var W=0;var ag=0;var ai=true;var am=0;var Z=-1;var Y=-1;var ah=D;var ad=false;var Q="";var ac=s;var an="";var U=ao.rootNode;var aj=new Array();do{P=ab.indexOf("(",ag);ae=ab.indexOf(")",ag);W=ab.indexOf(";",ag);X=O(P,ae,W);if(V==K&&X==ae){V=k}if(V==K&&X==P){V=b}else{if(V==b&&X==W){V=K}else{if(V==k&&X==P){V=b}}}switch(V){case b:if(X!=P){throw q(ab,X)}aj.push(U);ag=X+1;break;case k:if(X!=ae){throw q(ab,X)}U=aj.pop();am=U.moveNumber;ag=X+1;break;case K:if(X!=W){throw q(ab,X)}if(ai){ai=false}else{if(U.isDummyNode()&&U.parent!=null){U.parent.children.pop();U=U.parent}var R=new r(U);R.moveNumber=am;if(aj.length>0){R.depth=aj[aj.length-1].depth+1}U.children.push(R);U=R}var S;X++;do{var aa=0;X=v(ab,X);if(ab.charAt(X)=="B"&&ab.charAt(aa=v(ab,X+1))=="["){S=d;X=aa;ah=z}else{if(ab.charAt(X)=="W"&&ab.charAt(aa=v(ab,X+1))=="["){S=l;X=aa;ah=H}else{if(ab.charAt(X)=="A"&&ab.charAt(X+1)=="B"&&ab.charAt(aa=v(ab,X+2))=="["){S=E;X=aa;ad=true;ah=z}else{if(ab.charAt(X)=="A"&&ab.charAt(X+1)=="W"&&ab.charAt(aa=v(ab,X+2))=="["){S=N;X=aa;ad=true;ah=H}else{if(ab.charAt(X)=="A"&&ab.charAt(X+1)=="E"&&ab.charAt(aa=v(ab,X+2))=="["){S=i;X=aa;ad=true;ah=STONE_ERASE}else{if(ab.charAt(X)=="T"&&ab.charAt(X+1)=="R"&&ab.charAt(aa=v(ab,X+2))=="["){S=M;ac=G;X=aa}else{if(ab.charAt(X)=="C"&&ab.charAt(X+1)=="R"&&ab.charAt(aa=v(ab,X+2))=="["){S=M;ac=g;X=aa}else{if(ab.charAt(X)=="S"&&ab.charAt(X+1)=="Q"&&ab.charAt(aa=v(ab,X+2))=="["){S=M;ac=C;X=aa}else{if(ab.charAt(X)=="M"&&ab.charAt(X+1)=="A"&&ab.charAt(aa=v(ab,X+2))=="["){S=M;ac=w;X=aa}else{if(ab.charAt(X)=="L"&&ab.charAt(X+1)=="B"&&ab.charAt(aa=v(ab,X+2))=="["){S=M;ac=B;X=aa;oldLabel=false}else{if(ab.charAt(X)=="C"&&ab.charAt(aa=v(ab,X+1))=="["){S=A;X=aa}else{if(ab.charAt(X)=="N"&&ab.charAt(aa=v(ab,X+1))=="["){S=L;X=aa}else{if(ab.charAt(X)=="T"&&ab.charAt(X+1)=="B"&&ab.charAt(aa=v(ab,X+2))=="["){S=M;ac=n;X=aa;ah=z}else{if(ab.charAt(X)=="T"&&ab.charAt(X+1)=="W"&&ab.charAt(aa=v(ab,X+2))=="["){S=M;ac=u;X=aa;ah=H}else{if(ab.charAt(X)==";"||ab.charAt(X)=="("||ab.charAt(X)==")"){X=v(ab,X);continue}else{var al=ab.indexOf("]",X)+1;if(al<=0){ag=X+1;break}X=al;X=v(ab,X);continue}}}}}}}}}}}}}}}do{if(ab.charAt(X)!="["){throw q(ab,X)}if(ab.charAt(X+1)=="]"){if(S==d||S==l){U.type=y;U.color=ah;U.moveNumber=++am}X+=2;continue}switch(S){case d:case l:Z=ab.charCodeAt(X+1)-x;Y=ab.charCodeAt(X+2)-x;U.type=I;if(Z>=19||Y>=19){U.type=y}U.color=ah;U.x=Z;U.y=Y;U.moveNumber=++am;X+=4;break;case E:case N:case i:Z=ab.charCodeAt(X+1)-x;Y=ab.charCodeAt(X+2)-x;U.points.push(new p(Z,Y,ah));X+=4;break;case A:if(U.comment==null){U.comment=""}while(ab.charAt(++X)!="]"||(ab.charAt(X-1)=="\\"&&ab.charAt(X)=="]")){if(!(ab.charAt(X)=="\\"&&ab.charAt(X+1)=="]")&&!(ab.charAt(X)=="\\"&&ab.charAt(X+1)=="[")&&!(ab.charAt(X)=="\\"&&ab.charAt(X+1)==")")&&!(ab.charAt(X)=="\\"&&ab.charAt(X+1)=="(")){U.comment+=ab.charAt(X)}if(X>T){throw q(ab,T)}}X++;break;case L:U.name="";while(ab.charAt(++X)!="]"){U.name+=ab.charAt(X)}X++;break;case M:while(ab.charAt(X)=="["&&X<T){Z=ab.charCodeAt(X+1)-x;Y=ab.charCodeAt(X+2)-x;X+=3;an="";if(ac==B){if(ab.charAt(X)!=":"){throw q(ab,X)}while(ab.charAt(++X)!="]"&&X<T){an+=ab.charAt(X)}try{var af=parseInt(an);ac=B}catch(ak){ac=B}}if(U.marks==null){U.marks=new Array()}U.marks.push([Z,Y,ac,an]);X++;X=v(ab,X)}break}X=v(ab,X)}while(ad&&ab.charAt(X)=="[");X=v(ab,X)}while(ab.charAt(X)!=";"&&ab.charAt(X)!="("&&ab.charAt(X)!=")"&&X<T);X=v(ab,X);ag=X;break;default:throw q(ab,ag)}}while(ag<T&&X>=0);if(U.isDummyNode()&&U.parent!=null){U.parent.children.pop()}return ao}catch(ak){throw q(ab,X,ak)}}return{initialize:f,parse:o}}();jsGameViewer.GameController=jsGameViewer.createClass();jq4gv.extend(jsGameViewer.GameController.prototype,{initialize:function(b){this.id=jsGameViewer.getGameId();this.jqId="#"+this.id;jsGameViewer[this.id]=this;this.config=jsGameViewer.clone(jsGameViewer.CONFIG);if(b!=null){jq4gv.extend(this.config,b)}this.reset()},init:function(){this.initView();this._initialized=true;return this},initialized:function(){return this._inialized==true},changeLocale:function(b){if(this.config.locale==b){return this}if(!jsGameViewer.LOCALES.indexOf(b)<0){alert("jsGameViewer WARNING: Invalid locale '"+b+"'");return this}this.config.locale=b;window.jsgvTranslations=window["jsgv_"+b];jsGameViewer.WEIQI_TEMPLATE=null;jsGameViewer.DAOQI_TEMPLATE=null;this.reset();this.show();if(this.gameState){this.gameState.backAll();this.initGame()}return this},destroy:function(){this.destroyView();delete jsGameViewer[this.id];jsGameViewer.length--},reset:function(){this._initialized=false;if(this.config.container!=null){var b=jq4gv("#"+this.config.container);if(b.get(0).nodeName=="DIV"){b.empty().append(this.getPlaceHolder())}else{if(jq4gv(this.jqId).get(0)){jq4gv(this.jqId).replaceWith(this.getPlaceHolder())}else{b.after(this.getPlaceHolder())}}}else{if(jq4gv(this.jqId).get(0)!=null){jq4gv(this.jqId).replaceWith(this.getPlaceHolder())}else{document.write(this.getPlaceHolder())}}return this},show:function(){if(!this.initialized()){this.init()}jq4gv(this.jqId).show();return this},hide:function(){jq4gv(this.jqId).hide();return this},setGameType:function(b){if(this.config.gameType!=b){this.config.gameType=b;this.reset()}return this},setGameTypeIf:function(b){if(this.config.gameType!=jsGameViewer.DAOQI&&this.game.type==jsGameViewer.DAOQI){this.setGameType(jsGameViewer.DAOQI)}return this},load:function(b,g){var d=jsGameViewer.model.GameHistory[b];if(d){jsGameViewer.model.GameHistory.save(d);this.game=d.game;this.setGameTypeIf(this.game.type).show();this.gameState=d;this.gameState.backAll();this.initGame();if(g==undefined){this.forwardAll()}else{this.forwardN(g)}return this}var f=this;jq4gv.ajax({url:b,success:function(h){try{if(f.game&&f.game.dataSize&&f.game.dataSize==h.length){return}f.game=new jsGameViewer.SGFParser(f.config.gameType).parse(h);f.game.dataSize=h.length;f.setGameTypeIf(f.game.type).show();f.game.url=b;f.gameState=new jsGameViewer.model.GameState(f.game);jsGameViewer.model.GameHistory.save(f.gameState);f.initGame();if(g==undefined){f.forwardAll()}else{f.forwardN(g)}}catch(i){throw"GameController.load('"+b+"')->success: "+i}},failure:function(){throw"GameController.load('"+b+"')->failure:"}});return this},loadSgf:function(b,f){try{b=jq4gv.trim(b);this.show();this.game=new jsGameViewer.SGFParser(this.config.gameType).parse(b);this.game.dataSize=b.length;this.setGameTypeIf(this.game.type);this.gameState=new jsGameViewer.model.GameState(this.game);this.initGame();if(f==undefined){this.forwardAll()}else{this.forwardN(f)}return this}catch(d){throw"GameController.loadSgf('"+b+"'): "+d}},loadInline:function(b,f){try{if(jq4gv("#"+b).length==0){return this}loadSgf(jq4gv("#"+b).text(),f);return this}catch(d){throw"GameController.loadInline('"+b+"'): "+d}},refresh:function(d){var b=this.game.url;var f=this;jq4gv.ajax({url:b,success:function(g){try{g=jq4gv.trim(g);jsgv.debug("refresh 1");if(!d&&f.game&&f.game.dataSize&&f.game.dataSize==g.length){return}jsgv.debug("refresh 2");f.game=new jsGameViewer.SGFParser(f.config.gameType).parse(g);f.game.dataSize=g.length;f.setGameTypeIf(f.game.type).show();f.game.url=b;f.gameState=new jsGameViewer.model.GameState(f.game);jsGameViewer.model.GameHistory.save(f.gameState);f.initGame();f.forwardAll()}catch(h){throw"GameController.refresh('"+b+"')->success: "+h}},failure:function(){throw"GameController.refresh('"+b+"')->failure:"}})},openInWindow:function(){var d=this.config.baseDir+"/php/game_window.php?";var h="jsgameviewer",f=722,b=452;if(this.config.gameType==jsGameViewer.DAOQI){d+="type=DAOQI&";f=798;b=528}if(this.game&&this.game.url){d+="url="+encodeURIComponent(this.game.url)}var g=window.open(d,h,"width="+f+"px,height="+b+"px,status=yes,location=no,resizable=yes")},getPlaceHolder:function(){return"<div id='"+this.id+"' style='display:none'>&nbsp;</div>"}});var GameController=jsGameViewer.GameController;jq4gv.extend(jsGameViewer.GameController.prototype,{setPlayerInterval:function(b){this.config.playerInterval=b;return this},setObserverInterval:function(b){this.config.observerInterval=b;return this},startUpdater:function(f){this.stopUpdater();if(this.game&&this.game.isFinished()){return this}var g=this;var d=function(){if(!g.game){return}if(g.game.isFinished()){g.stopUpdater();return}if(!f&&g.isMyTurn()){return}g.refresh()};var b=this.config.observerInterval;if(this.player){b=this.config.playerInterval}this.updater=setInterval(d,b*1000);return this},stopUpdater:function(){if(this.updater){clearInterval(this.updater);delete this.updater}return this}});jq4gv.extend(jsGameViewer.CONFIG,{gridSize:21,fastMode:10,showMoveNumber:false,activeBackground:"#EECD7A",inactiveBackground:"#CCAB69",boardColor:"#EECD7A",gridSizeWQ:21,gridSizeDQ:19,boardColorDQ:"#CCAB69",vbw:4,boardSizeDQ:27,rightPaneHeight:446,rightPaneHeightDQ:560});jq4gv.extend(jsGameViewer.GameController.prototype,function(){var d=["A","B","C","D","E","F","G","H","J","K","L","M","N","O","P","Q","R","S","T"];var b=["A","B","C","D","E","F","G","H","I","J"];return{destroyView:function(){jq4gv(this.jqId).remove()},getTemplateLocation:function(){var f=this.config.gameType==jsGameViewer.DAOQI?"daoqi":"weiqi";return this.config.viewDir+"templates/"+f+"_"+this.config.locale+".html"},initView:function(){if(this.initialized()){return this}this.config.x0=this.config.vbw;this.config.y0=this.config.vbw;var k="";if(this.config.gameType==jsGameViewer.DAOQI){this.config.gridSize=this.config.gridSizeDQ;if(jsGameViewer.DAOQI_TEMPLATE==null){jq4gv.ajax({async:false,dataType:"application/xml",url:this.getTemplateLocation(),success:function(m){jsGameViewer.DAOQI_TEMPLATE=m}})}k=jsGameViewer.DAOQI_TEMPLATE;this.rightPaneHeight=this.config.rightPaneHeightDQ}else{this.config.gridSize=this.config.gridSizeWQ;if(jsGameViewer.WEIQI_TEMPLATE==null){jq4gv.ajax({async:false,dataType:"application/xml",url:this.getTemplateLocation(),success:function(m){jsGameViewer.WEIQI_TEMPLATE=m}})}k=jsGameViewer.WEIQI_TEMPLATE;this.rightPaneHeight=this.config.rightPaneHeight}if(this.id!="GV1"){k=k.replace(/GV1/g,this.id)}jq4gv(this.jqId).replaceWith(k);var l=this;var h=function(n){l.registerKeyListener();var m=l.eventToXY(n);l.toX=m[0];l.toY=m[1];jq4gv(l.jqId+"_pointLabel").empty().append(l.xyToLabel(m[0],m[1]));return false};var i=function(m){jq4gv(l.jqId+"_pointLabel").empty();return false};var g=function(n){var m=l.eventToXY(n);if(l.config.gameType==jsGameViewer.DAOQI){l.fromX=l.toX=m[0];l.fromY=l.toY=m[1];jq4gv(this).css("cursor","move");jsgv.debug("fromX: "+l.fromX+", fromY: "+l.fromY)}else{l.play(m[0],m[1])}jq4gv(this).one("mouseup",f);return false};var f=function(m){jq4gv(this).unbind("mouseup");if(!(l.config.gameType==jsGameViewer.DAOQI)){return false}jq4gv(this).css("cursor","auto");if(l.fromX==undefined||l.fromX==NaN||l.fromY==undefined||l.fromY==NaN){return}if(l.fromX!=l.toX||l.fromY!=l.toY){l.moveBoard(l.toX-l.fromX,l.toY-l.fromY)}else{l.play(l.toX,l.toY)}return false};jq4gv(this.jqId+"_boardFascade").mousemove(h).mouseout(i).mousedown(g);this.setToggleNumberImg();jq4gv(this.jqId+"_goToInput").keydown(function(){if(e.keyCode==13){gvGoTo(id)}});this.addPrisonerHandlers();this.registerKeyListener();jq4gv(document).ready(function(){tb_init("a.thickbox")});return this},addPrisonerHandlers:function(){var f=this;jq4gv(this.jqId+"_moveOuter, "+this.jqId+"_blackPrisonersOuter, "+this.jqId+"_whitePrisonersOuter").mouseout(function(){jq4gv(f.jqId+"_prisoners").empty()});jq4gv(this.jqId+"_blackPrisonersOuter").mouseover(function(){jq4gv(f.jqId+"_prisoners").empty();if(f.gameState.blackPrisoners>0){jq4gv.each(f.gameState.blackPrisonerPoints,function(g,h){f.showPrisoner(h)})}});jq4gv(this.jqId+"_whitePrisonersOuter").mouseover(function(){jq4gv(this.jqId+"_prisoners").empty();if(f.gameState.whitePrisoners>0){jq4gv.each(f.gameState.whitePrisonerPoints,function(g,h){f.showPrisoner(h)})}});jq4gv(this.jqId+"_moveOuter").mouseover(function(){jq4gv(f.jqId+"_prisoners").empty();if(f.gameState.currentNode.blackPrisoners>0){jq4gv.each(f.gameState.currentNode.blackPrisonerPoints,function(g,h){f.showPrisoner(h)})}if(f.gameState.currentNode.whitePrisoners>0){jq4gv.each(f.gameState.currentNode.whitePrisonerPoints,function(g,h){f.showPrisoner(h)})}})},showPrisoner:function(p){var k=this;var n=p[0],l=p[1],i=p[2];var g=this.xyToArea(n,l);var h=g[0],m=g[1],f=g[2],o=g[3];if(this.config.gameType==jsGameViewer.DAOQI){var r=i==jsGameViewer.model.STONE_BLACK?"gvsprite-19-markblack":"gvsprite-19-markwhite";this.mapToPoints(n,l,function(u,x){var y=k.xyToArea(u,x);var A=y[0],z=y[1],w=y[2],t=y[3];var v="<div class='"+r+"' style='position:absolute;left:"+A+"px;top:"+z+"px;";if(k.gameState.board[n][l]==jsGameViewer.model.STONE_NONE){if(k.isInCentralArea(u,x)){v+="background-color:"+k.config.boardColorDQ+";"}else{v+="background-color:"+k.config.boardColor+";"}}v+="'></div>";jq4gv(this.jqId+"_prisoners").append(v)})}else{var r=i==jsGameViewer.model.STONE_BLACK?"gvsprite-21-markblack":"gvsprite-21-markwhite";var q="<div class='"+r+"' style='position:absolute;left:"+h+"px;top:"+m+"px;";if(this.gameState.board[n][l]==jsGameViewer.model.STONE_NONE){q+="background-color:"+this.config.boardColor+";"}q+="'></div>";jq4gv(this.jqId+"_prisoners").append(q)}},removeKeyListener:function(){jq4gv(this.jqId+"_bannerbg").css("background-color",this.config.inactiveBackground)},registerKeyListener:function(){var g=this;for(var f=1;f<=jsGameViewer.length;f++){jsGameViewer[jsGameViewer.getGameId(f)].removeKeyListener()}jq4gv(this.jqId+"_bannerbg").css("background-color",this.config.activeBackground);document.onkeydown=function(i){var h;if(window.event){h=window.event.keyCode}else{if(i){h=i.which}else{return}}i=i||window.event;switch(h){case 37:if(i.ctrlKey){if(i.altKey){g.backAll()}else{g.backN(g.config.fastMode)}}else{if(i.altKey&&i.shiftKey){g.backToComment()}else{g.back()}}return;case 39:if(i.ctrlKey){if(i.altKey){g.forwardAll()}else{g.forwardN(g.config.fastMode)}}else{if(i.altKey&&i.shiftKey){g.forwardToComment()}else{g.forward()}}return;case 46:g.remove();return}if(i.altKey&&i.shiftKey){switch(h){case 71:setTimeout("jsGameViewer."+g.id+".goToPopup()",100);break;case 77:g.toggleNumber();break;case 82:g.refresh();break;default:if(h>=65&&h<=90){g.goToBranch(h-65)}}}};return this},initGame:function(){return this.removeAllStones().setGameInfo().setGameState().addRemoveStones(this.gameState.currentNode.points)},setGameInfo:function(){if(this.isMyTurn()&&!this.game.isFinished()){jq4gv(this.jqId+"_resign").show()}else{jq4gv(this.jqId+"_resign").hide()}var l=jq4gv(this.jqId+"_info").empty();var h=this.game;if(h==undefined||h==null){return this}if(jsGameViewer.notNull(h.name)){l.append("<div align='center' style='font-weight:bold'>"+jq4gv.trim(h.name)+"</div>")}if(jsGameViewer.notNull(h.date)){l.append("<div>"+jsgvTranslations.time+": "+jq4gv.trim(h.date)+"</div>")}if(jsGameViewer.notNull(h.place)){l.append("<div>"+jsgvTranslations.place+": "+jq4gv.trim(h.place)+"</div>")}var m="&nbsp;&#8592; "+jsgvTranslations.play_first;var g="";if(jsGameViewer.notNull(h.blackRank)){g="&nbsp;("+h.blackRank+")"}var f="<div>"+jsgvTranslations.black+": <strong>"+jq4gv.trim(h.blackName)+"</strong>"+g;if(h.getFirstPlayer()==jsGameViewer.model.STONE_BLACK){f+=m}f+="</div>";l.append(f);var k="";if(jsGameViewer.notNull(h.whiteRank)){k="&nbsp;("+h.whiteRank+")"}var i="<div>"+jsgvTranslations.white+": <strong>"+jq4gv.trim(h.whiteName)+"</strong>"+k;if(h.getFirstPlayer()==jsGameViewer.model.STONE_WHITE){i+=m}i+="</div>";l.append(i);if(h.handicap>0){l.append("<div>"+jsgvTranslations.handicap+": "+h.handicap+"</div>")}else{l.append("<div>"+jsgvTranslations.rule+": "+jq4gv.trim(h.rule)+"</div>");l.append("<div>"+jsgvTranslations.komi+": "+h.komi+"</div>")}l.append("<div>"+jsgvTranslations.moves+": "+h.getMoves()+"</div>");l.append("<div>"+jsgvTranslations.result+": "+jq4gv.trim(h.result)+"</div>");return this},removeGameInfo:function(){jq4gv(this.jqId+"_info").empty();return this},setGameState:function(){var f=this.gameState.currentNode;this.setNextPlayer(this.gameState.getNextPlayer());this.setMoveNumber(f.moveNumber);this.setPrisoners(this.gameState.blackPrisoners,this.gameState.whitePrisoners);if(f.type==jsGameViewer.model.NODE_MOVE){this.setMoveMark(f.x,f.y)}else{this.removeMoveMark()}this.setMarks(f.marks);this.setBranches();this.setComment();return this},moveBoard:function(q,o){var m=this;if(this.config.gameType!=jsGameViewer.DAOQI){return}var n=this.gameState.board;this.config.x0=n.normalize(this.config.x0+q);this.config.y0=n.normalize(this.config.y0+o);this.removeAllStones();this.removeBranches();this.removeMoveMark();var t="";for(var l=0;l<n.size;l++){for(var h=0;h<n.size;h++){var g=n[l][h];if(g==jsGameViewer.model.STONE_BLACK||g==jsGameViewer.model.STONE_WHITE){var r=0;if(this.config.showMoveNumber){r=this.gameState.getMoveNumber(l,h)}this.mapToPoints(l,h,function(i,s){t+=m.createStone(i,s,g,r)})}}}if(t.length>0){jq4gv(this.jqId+"_boardPoints").append(t)}this.setBranches();var f=this.gameState.currentNode;if(f.type==jsGameViewer.model.NODE_MOVE){this.setMoveMark(f.x,f.y)}else{this.removeMoveMark()}var p=(this.config.y0-this.config.vbw)*this.config.gridSize;jq4gv(this.jqId+"_vlabel").css("backgroundPosition","0px "+p+"px");var k=(this.config.x0-this.config.vbw)*this.config.gridSize;jq4gv(this.jqId+"_hlabel").css("backgroundPosition",k+"px 0px");this.setMarks(f.marks);return this},mapToPoints_:function(n,l){var p=new Array();var f=n+this.config.x0,m=l+this.config.y0;var g=[];if(f>=0&&f<this.config.boardSizeDQ){g.push(f)}if(f>=this.config.boardSize){g.push(f-this.config.boardSize)}if(f<this.config.boardSizeDQ-this.config.boardSize){g.push(f+this.config.boardSize)}var o=[];if(m>=0&&m<this.config.boardSizeDQ){o.push(m)}if(m>=this.config.boardSize){o.push(m-this.config.boardSize)}if(m<this.config.boardSizeDQ-this.config.boardSize){o.push(m+this.config.boardSize)}for(var k=0;k<g.length;k++){for(var h=0;h<o.length;h++){p.push([g[k],o[h]])}}return p},mapToPoints:function(f,m,l){var k=this.mapToPoints_(f,m);for(var g=0;g<k.length;g++){var h=k[g];l(h[0],h[1])}return this},getStoneId:function(f,g){return this.id+"_point_"+f+"-"+g},createStone:function(l,k,g,n){var i="";if(this.config.gameType==jsGameViewer.DAOQI){if(g==jsGameViewer.model.STONE_BLACK){i="gvsprite-19-black"}else{if(g==jsGameViewer.model.STONE_WHITE){i="gvsprite-19-white"}else{return null}}}else{if(g==jsGameViewer.model.STONE_BLACK){i="gvsprite-21-black"}else{if(g==jsGameViewer.model.STONE_WHITE){i="gvsprite-21-white"}else{return null}}}var o="<div id='"+this.getStoneId(l,k)+"' class='"+i+"' style='position:absolute;left:";a=this.xyToArea(l,k);o+=a[0]+"px;top:"+a[1]+"px;'>";if(this.config.showMoveNumber&&n>0){var h="white";if(g==jsGameViewer.model.STONE_WHITE){h="black"}var m="medium";var f=0;if(n>=10&&n<100){m="small"}else{if(n>=100){m="x-small";f=1}}o+="<div style='display:table;width:"+a[2]+"px;height:"+a[3]+"px;#position:relative;overflow:hidden;'><div style='display:table-cell;vertical-align:middle;#position:absolute;#top:50%;'><div style='#position:relative;left:"+f+"px;width:100%;#top:-50%;text-align:center;color:"+h+";font-family:times;font-size:"+m+";'>"+n+"</div></div></div>"}else{o+="&nbsp;"}o+="</div>";return o},addStone:function(f,l,g){var k=this;var i=0;if(this.config.showMoveNumber){i=this.gameState.getMoveNumber(f,l)}if(this.config.gameType==jsGameViewer.DAOQI){this.mapToPoints(f,l,function(m,o){var n=k.createStone(m,o,g,i);if(n!=null){jq4gv(k.jqId+"_boardPoints").append(n)}})}else{var h=this.createStone(f,l,g,i);if(h!=null){jq4gv(this.jqId+"_boardPoints").append(h)}}return this},addRemoveStones:function(h){for(var g=0;g<h.length;g++){var f=h[g];this.removeStone(f.x,f.y);if(!f.deleteFlag){this.addStone(f.x,f.y,f.color)}}return this},removeStone:function(f,i){var h=this;if(this.config.gameType==jsGameViewer.DAOQI){this.mapToPoints(f,i,function(k,m){var l=jq4gv("#"+h.getStoneId(k,m));l.remove()})}else{var g=jq4gv("#"+this.getStoneId(f,i));g.remove()}return this},removeAllStones:function(){jq4gv(this.jqId+"_boardPoints").children().remove();return this},setNextPlayer:function(f){var g="";if(f==jsGameViewer.model.STONE_WHITE){g=this.config.viewDir+"/images/15/white.gif"}else{g=this.config.viewDir+"/images/15/black.gif"}jq4gv(this.jqId+"_nextPlayer").attr("src",g);return this},setMoveNumber:function(f){if(f==0){f="0"}jq4gv(this.jqId+"_curMove").empty().append(f);return this},setMoveMark:function(f,h){var g=this;if(this.config.gameType==jsGameViewer.DAOQI){jq4gv(this.jqId+"_moveMarks").empty();this.mapToPoints(f,h,function(i,l){var k=g.xyToArea(i,l);jq4gv(g.jqId+"_moveMarks").append("<div class='gvsprite-19-markmove' style='position:absolute;left:"+k[0]+"px;top:"+k[1]+"px;width:"+k[2]+"px;height:"+k[3]+"px'>&nbsp;</div>")})}else{jq4gv(this.jqId+"_moveMark").css({position:"absolute",left:f*this.config.gridSize,top:h*this.config.gridSize,width:this.config.gridSize,height:this.config.gridSize})}return this},removeMoveMark:function(){if(this.config.gameType==jsGameViewer.DAOQI){jq4gv(this.jqId+"_moveMarks").empty()}else{jq4gv(this.jqId+"_moveMark").css({width:0,height:0})}return this},setMarks:function(r){var o=this;jq4gv(this.jqId+"_boardMarks").empty();if(r==undefined||r==null){return this}if(this.config.gameType==jsGameViewer.DAOQI){for(var m=0;m<r.length;m++){var k=r[m];var t=k[0],q=k[1];var l=this.gameState.board[t][q];var n="";switch(k[2]){case jsGameViewer.model.MARK_CROSS:n="gvsprite-19-markcross";break;case jsGameViewer.model.MARK_TRIANGLE:n="gvsprite-19-marktriangle";break;case jsGameViewer.model.MARK_SQUARE:n="gvsprite-19-marksquare";break;case jsGameViewer.model.MARK_CIRCLE:n="gvsprite-19-markcircle";break;case jsGameViewer.model.MARK_TERR_BLACK:n="gvsprite-19-markblack";break;case jsGameViewer.model.MARK_TERR_WHITE:n="gvsprite-19-markwhite";break;case jsGameViewer.model.MARK_TEXT:this.mapToPoints(t,q,function(w,E){var B=o.xyToArea(w,E);var D=B[0],C=B[1],A=B[2],i=B[3];var z="<div style='position:absolute;left:"+D+"px;top:"+C+"px;width:"+A+"px;height:"+i+"px;text-align:center;vertical-align:middle;color:red;font-family:Nina;font-weight:bolder;font-size:14px;";if(l==jsGameViewer.model.STONE_NONE){if(o.isInCentralArea(w,E)){z+="background-color:"+o.config.boardColorDQ+";"}else{z+="background-color:"+o.config.boardColor+";"}}z+="'>"+k[3]+"</div>";jq4gv(o.jqId+"_boardMarks").append(z)});continue}this.mapToPoints(t,q,function(w,E){var B=o.xyToArea(w,E);var D=B[0],C=B[1],A=B[2],i=B[3];var z="<div class='"+n+"' style='position:absolute;left:"+D+"px;top:"+C+"px;";if(l==jsGameViewer.model.STONE_NONE){if(o.isInCentralArea(w,E)){z+="background-color:"+o.config.boardColorDQ+";"}else{z+="background-color:"+o.config.boardColor+";"}}z+="'></div>";jq4gv(o.jqId+"_boardMarks").append(z)})}}else{for(var m=0;m<r.length;m++){var k=r[m];var t=k[0],q=k[1];var l=this.gameState.board[t][q];var g=this.xyToArea(t,q);var h=g[0],p=g[1],f=g[2],u=g[3];var n="";switch(k[2]){case jsGameViewer.model.MARK_CROSS:n="gvsprite-21-markcross";break;case jsGameViewer.model.MARK_TRIANGLE:n="gvsprite-21-marktriangle";break;case jsGameViewer.model.MARK_SQUARE:n="gvsprite-21-marksquare";break;case jsGameViewer.model.MARK_CIRCLE:n="gvsprite-21-markcircle";break;case jsGameViewer.model.MARK_TERR_BLACK:n="gvsprite-21-markblack";break;case jsGameViewer.model.MARK_TERR_WHITE:n="gvsprite-21-markwhite";break;case jsGameViewer.model.MARK_TEXT:var v="<div style='position:absolute;left:"+h+"px;top:"+p+"px;width:"+f+"px;height:"+u+"px;text-align:center;vertical-align:middle;color:red;font-family:Nina;font-weight:bolder;font-size:15px;";if(l==jsGameViewer.model.STONE_NONE){v+="background-color:"+this.config.boardColor+";"}v+="'>"+k[3]+"</div>";jq4gv(this.jqId+"_boardMarks").append(v);continue}var v="<div class='"+n+"' style='position:absolute;left:"+h+"px;top:"+p+"px;";if(l==jsGameViewer.model.STONE_NONE){v+="background-color:"+this.config.boardColor+";"}v+="'></div>";jq4gv(this.jqId+"_boardMarks").append(v)}}return this},setPrisoners:function(f,g){if(f==0){f="0"}if(g==0){g="0"}jq4gv(this.jqId+"_blackPrisoners").empty().append(f);jq4gv(this.jqId+"_whitePrisoners").empty().append(g);return this},setBranches:function(){var m=this;jq4gv(this.jqId+"_boardBranches").empty();jq4gv(this.jqId+"_branches").empty();jq4gv(this.jqId+"_branches").css({height:0});var k=this.gameState.currentNode;if(k.hasChildren()&&k.children.length>=2){var h=k.children.length;for(var l=0;l<k.children.length;l++){var r="";if(l==0){r=jsgvTranslations.branch+" A = "+jsgvTranslations.trunk+" [Alt Shift &#8594;][Alt Shift A]"}else{if(l<b.length){var o=b[l];r=jsgvTranslations.branch+" "+o+" [Alt Shift "+o+"]"}}var t="<div class='gvtb-branch gvbutton'><a href='#' title='"+r+"' onclick='jsGameViewer."+this.id+".goToBranch("+l+");return false;'>"+b[l]+"</a></div>";jq4gv(this.jqId+"_branches").append(t);jq4gv(this.jqId+"_branches").css({height:h*23});var g=k.children[l];if(g.type==jsGameViewer.model.NODE_MOVE){var q=g.x,p=g.y;if(this.config.gameType==jsGameViewer.DAOQI){this.mapToPoints(q,p,function(i,u){var n="gvbranch";if(m.isInCentralArea(i,u)){n="gvbranch-real"}var s=m.xyToArea(i,u);jq4gv(m.jqId+"_boardBranches").append("<div class='"+n+"' style='left:"+s[0]+"px;top:"+s[1]+"px;width:"+s[2]+"px;height:"+s[3]+"px;'>"+b[l]+"</div>")})}else{var f=m.xyToArea(q,p);jq4gv(m.jqId+"_boardBranches").append("<div class='gvbranch' style='left:"+f[0]+"px;top:"+f[1]+"px;width:"+f[2]+"px;height:"+f[3]+"px;'>"+b[l]+"</div>")}}}}return this},removeBranches:function(){jq4gv(this.jqId+"_boardBranches").empty();jq4gv(this.jqId+"_branches").empty();jq4gv(this.jqId+"_branches").css({height:0});return this},setComment:function(g){var f=this.gameState.currentNode;if(!g){g="<strong>";if(f.depth>1){g+=jsgvTranslations.branch_tag}g+=jsgvTranslations.comment_for.replace(/MOVE/,f.moveNumber)+":</strong>";if(f.comment!=undefined&&f.comment!=null){g+="<br/>"+f.comment.replace(/\n/g,"<br/>\n")}}jq4gv(this.jqId+"_comment").empty().append(g);jq4gv(this.jqId+"_comment").height(this.rightPaneHeight-jq4gv(this.jqId+"_info").height()-12);return this},removeComment:function(){jq4gv(this.jqId+"_comment").empty();return this},redrawBoard:function(){var n=this;var l=this.gameState.board;var k="";if(this.config.gameType==jsGameViewer.DAOQI){for(var h=0;h<l.size;h++){for(var g=0;g<l.size;g++){var f=l[h][g];var m=0;if(this.config.showMoveNumber){m=this.gameState.getMoveNumber(h,g)}if(f==jsGameViewer.model.STONE_BLACK||f==jsGameViewer.model.STONE_WHITE){this.mapToPoints(h,g,function(i,o){k+=n.createStone(i,o,f,m)})}}}}else{for(var h=0;h<l.size;h++){for(var g=0;g<l.size;g++){var f=l[h][g];var m=0;if(this.config.showMoveNumber){m=this.gameState.getMoveNumber(h,g)}if(f==jsGameViewer.model.STONE_BLACK||f==jsGameViewer.model.STONE_WHITE){k+=this.createStone(h,g,f,m)}}}}jq4gv(this.jqId+"_boardPoints").empty();if(k.length>0){jq4gv(this.jqId+"_boardPoints").append(k)}return this},play:function(f,o){if(this.gameState==null){return this}var n=this;if(this.gameState.board[f][o]!=0){if(this.gameState.isFirst()){return false}var k=new Array();var m=false;for(;;){var l=this.gameState.currentNode;if(l.type==jsGameViewer.model.NODE_MOVE&&l.x==f&&l.y==o){break}if(!this.back_(k)){break}m=true}if(m){jq4gv.each(k,function(q,p){n.removeStone(p.x,p.y);if(p.deleteFlag){n.addStone(p.x,p.y,p.color)}});this.setGameState();return true}return false}if(!this.gameState.isLast()){var h=this.gameState.currentNode.children;for(var g=0;g<h.length;g++){var l=h[g];if(l.type==jsGameViewer.model.NODE_MOVE&&l.x==f&&l.y==o){return this.goToBranch(g)}}}if(this.gameState.play(f,o)){var l=this.gameState.currentNode;jq4gv.each(l.points,function(q,p){n.removeStone(p.x,p.y);if(!p.deleteFlag){n.addStone(p.x,p.y,p.color)}});this.setGameState();return true}else{return false}},remove:function(){var g=this;if(this.gameState!=null&&this.gameState.canRemove()){var f=this.gameState.currentNode;jq4gv.each(f.points,function(k,h){g.removeStone(h.x,h.y);if(h.deleteFlag){g.addStone(h.x,h.y,h.color)}});this.gameState.remove();this.setGameState()}return this},back_:function(k){if(this.gameState.isFirst()){return false}var l=this.gameState.currentNode;for(var h=0;h<l.points.length;h++){var f=l.points[h];var m=false;for(var g=0;g<k.length;g++){var n=k[g];if(f.x==n.x&&f.y==n.y){m=true;k[g]=f;break}}if(!m){k.push(f)}}this.gameState.back();return true},back:function(){if(this.gameState==null){return this}if(this.gameState.isFirst()){return false}var g=this;var f=this.gameState.currentNode;jq4gv.each(f.points,function(k,h){g.removeStone(h.x,h.y);if(h.deleteFlag){g.addStone(h.x,h.y,h.color)}});this.gameState.back();this.setGameState();return true},backN:function(l){if(this.gameState==null){return this}var k=this;if(l==undefined){l=this.config.fastMode}var g=new Array();var h=false;for(var f=0;f<l;f++){if(!this.back_(g)){break}h=true}if(h){jq4gv.each(g,function(n,m){k.removeStone(m.x,m.y);if(m.deleteFlag){k.addStone(m.x,m.y,m.color)}});this.setGameState()}return this},backToComment:function(){if(this.gameState==null){return this}var i=this;var f=new Array();var h=false;for(;;){if(!this.back_(f)){break}h=true;var g=this.gameState.currentNode;if(g.hasComment()||g.hasBranches()){break}}if(h){jq4gv.each(f,function(l,k){i.removeStone(k.x,k.y);if(k.deleteFlag){i.addStone(k.x,k.y,k.color)}});this.setGameState()}return this},backAll:function(){if(this.gameState==null){return this}var g=this;this.removeAllStones();this.gameState.backAll();var f=this.gameState.currentNode;jq4gv.each(f.points,function(k,h){if(h.color==jsGameViewer.model.STONE_BLACK||h.color==jsGameViewer.model.STONE_WHITE){g.addStone(h.x,h.y,h.color)}});this.setGameState();return this},forward_:function(k){if(this.gameState.isLast()){return false}this.gameState.forward();var l=this.gameState.currentNode;for(var h=0;h<l.points.length;h++){var f=l.points[h];var m=false;for(var g=0;g<k.length;g++){var n=k[g];if(f.x==n.x&&f.y==n.y){m=true;k[g]=f;break}}if(!m){k.push(f)}}return true},forward:function(){if(this.gameState==null){return this}if(!this.gameState.forward()){return false}var g=this;var f=this.gameState.currentNode;jq4gv.each(f.points,function(k,h){g.removeStone(h.x,h.y);if(!h.deleteFlag){g.addStone(h.x,h.y,h.color)}});this.setGameState();return true},forwardN:function(l){if(this.gameState==null){return this}var k=this;if(l==undefined){l=this.config.fastMode}var g=new Array();var h=false;for(var f=0;f<l;f++){if(!this.forward_(g)){break}h=true}if(h){jq4gv.each(g,function(n,m){k.removeStone(m.x,m.y);if(!m.deleteFlag){k.addStone(m.x,m.y,m.color)}});this.setGameState()}return this},forwardToComment:function(){if(this.gameState==null){return this}var i=this;var f=new Array();var h=false;for(;;){if(!this.forward_(f)){break}h=true;var g=this.gameState.currentNode;if(g.hasComment()||g.hasBranches()){break}}if(h){jq4gv.each(f,function(l,k){i.removeStone(k.x,k.y);if(!k.deleteFlag){i.addStone(k.x,k.y,k.color)}});this.setGameState()}return this},forwardAll:function(){if(this.gameState==null){return this}this.removeAllStones();this.gameState.forwardAll();this.redrawBoard();this.setGameState();return this},goToBranch:function(h){if(this.gameState==null){return this}if(!this.gameState.goToBranch(h)){return this}var g=this;var f=this.gameState.currentNode;jq4gv.each(f.points,function(l,k){g.removeStone(k.x,k.y);if(!k.deleteFlag){g.addStone(k.x,k.y,k.color)}});this.setGameState();return this},goTo:function(i){if(this.gameState==null){return this}var h=this;while(this.gameState.isOnBranch()){this.back()}if(i>=this.gameState.game.getMoves()){this.forwardAll()}else{if(i<=0){this.backAll()}else{if(i>this.gameState.currentNode.moveNumber){var f=new Array();var g=false;while(i>this.gameState.currentNode.moveNumber){if(!this.forward_(f)){break}g=true}if(g){jq4gv.each(f,function(l,k){h.removeStone(k.x,k.y);if(!k.deleteFlag){h.addStone(k.x,k.y,k.color)}});this.setGameState()}}else{if(i<this.gameState.currentNode.moveNumber){var f=new Array();var g=false;while(i<this.gameState.currentNode.moveNumber){if(!this.back_(f)){break}g=true}if(g){jq4gv.each(f,function(l,k){h.removeStone(k.x,k.y);if(k.deleteFlag){h.addStone(k.x,k.y,k.color)}});this.setGameState()}}}}}return this},goToXYs:function(g){this.backAll();for(var h=0;h<g.length;h++){var f=g[h][0],l=g[h][1];var k=this.gameState.currentNode.childThatMatches(f,l);if(k!=null){this.goToBranch(k)}else{break}}return this},setToggleNumberImg:function(){if(this.config.showMoveNumber){jq4gv(this.jqId+"_toggleNumberImg").removeClass("gvsprite-hidenumber");jq4gv(this.jqId+"_toggleNumberImg").addClass("gvsprite-shownumber")}else{jq4gv(this.jqId+"_toggleNumberImg").removeClass("gvsprite-shownumber");jq4gv(this.jqId+"_toggleNumberImg").addClass("gvsprite-hidenumber")}return this},toggleNumber:function(){if(this.config.showMoveNumber){this.config.showMoveNumber=false}else{this.config.showMoveNumber=true}this.setToggleNumberImg();if(this.gameState==null){return this}this.redrawBoard();return this},showNumber:function(){if(this.config.hideMoveNumber){this.toggleNumber()}return this},hideNumber:function(){if(this.config.showMoveNumber){this.toggleNumber()}return this},eventToXY:function(g){g=g.originalEvent||window.event;layerX=g.layerX||g.offsetX||g.clientX;layerY=g.layerY||g.offsetY||g.clientY;var f=parseInt(layerX/this.config.gridSize);var h=parseInt(layerY/this.config.gridSize);if(this.config.gameType==jsGameViewer.DAOQI){f=(f+this.config.boardSize-this.config.x0)%this.config.boardSize;h=(h+this.config.boardSize-this.config.y0)%this.config.boardSize}return[f,h]},isInCentralArea:function(f,g){return f>=this.config.vbw&&f<this.config.boardSize+this.config.vbw&&g>=this.config.vbw&&g<this.config.boardSize+this.config.vbw},xyToArea:function(f,g){return[f*this.config.gridSize,g*this.config.gridSize,this.config.gridSize,this.config.gridSize]},xyToLabel:function(f,h){var g=d[f];g+=this.config.boardSize-parseInt(h);return g},postThickBoxFix:function(){this.registerKeyListener()},goToPopup:function(){var f="#TB_inline?test=0&width=250&height=56&inlineId="+this.id+"_goTo&focus="+this.id+"_goToInput&modal=true&test1=0";tb_show("",f,null)},goToOkHandler:function(){try{var f=document.getElementsByName(this.id+"_goToForm")[1].goToInput.value;tb_remove();var g=parseInt(f);this.goTo(g)}catch(h){throw"GameController().goToOkHandler(): "+h}this.postThickBoxFix()},goToKeyDown:function(f,h){var g;if(window.event){g=window.event.keyCode}else{if(h){g=h.which}else{return}}if(g==13){gvGoToInput=f.value;this.goToOkHandler()}else{if(g==27){tb_remove();this.postThickBoxFix()}}}}}());jq4gv.extend(jsGameViewer.GameController.prototype,{setPlayer:function(b){this.player=b;return this},saveSession:function(d,b){if(!this.sessionSaver){this.sessionSaver=setInterval(function(){jq4gv.ajax({url:d})},b*1000)}return this},setUsernameElemId:function(b){this.usernameElemId=b;return this},setUsername:function(b){this.username=b;return this},getUsername:function(){if(this.username){return this.username}else{if(this.usernameElemId){return jq4gv.trim(jq4gv("#"+this.usernameElemId).text())}else{return null}}},isPlayer:function(){if(this.player&&this.player.isPlayer){return this.player.isPlayer()}else{return false}},isMyTurn:function(){if(this.player&&this.player.isMyTurn){return this.player.isMyTurn()}else{return false}},sendMove:function(){if(this.player&&this.player.sendMove){return this.player.sendMove()}else{return false}},resign:function(){if(this.player&&this.player.resign){if(confirm(jsgvTranslations.confirm_resign)){this.player.resign()}}else{return false}},origPlay:jsGameViewer.GameController.prototype.play,play:function(b,d){if(this.origPlay(b,d)&&this.player&&this.player.sendMove){return this.player.sendMove()}}});